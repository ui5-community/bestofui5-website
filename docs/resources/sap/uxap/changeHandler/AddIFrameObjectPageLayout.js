/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/changeHandler/AddIFrame","sap/ui/fl/changeHandler/common/getTargetAggregationIndex","sap/ui/fl/changeHandler/common/createIFrame"],function(e,t,n,r){"use strict";var a=Object.assign({},t);a.applyChange=function(e,a,o){var i=o.modifier;var g=e.getContent();var c=g.targetAggregation;if(c!=="sections"){return Promise.resolve().then(t.applyChange.bind(t,e,a,o))}var s=o.view;var u=o.appComponent;var l=g.selector;var f=sap.ui.getCore().getLibraryResourceBundle("sap.uxap").getText("SECTION_TITLE_FOR_IFRAME");var d;var p;return Promise.resolve().then(i.createControl.bind(i,"sap.uxap.ObjectPageSection",u,s,l,{title:f},false)).then(function(e){d=e;var t=Object.create(l);t.id+="-subSection";return i.createControl("sap.uxap.ObjectPageSubSection",u,s,t,{title:f},false)}).then(function(e){p=e;return i.insertAggregation(d,"subSections",p,0,s)}).then(function(){var t=Object.create(l);t.id+="-iframe";var n={sourceControlId:i.getId(p),selectorControlId:i.getId(d),propertyName:"title"};return r(e,o,t,n)}).then(function(e){return i.insertAggregation(p,"blocks",e,0,s)}).then(n.bind(null,e,a,o)).then(function(e){return i.insertAggregation(a,"sections",d,e,s)}).then(function(){e.setRevertData([i.getId(d)])})};a.getCondenserInfo=function(e){var n=Object.assign({},t.getCondenserInfo(e));var r=e.getContent();var a=r.targetAggregation;if(a==="sections"){n.updateControl=Object.assign({},n.affectedControl);n.updateControl.id=n.affectedControl.id+"-iframe"}return n};a.getChangeVisualizationInfo=function(t,n){var r=t.getContent().selector;var a=e.bySelector(r,n);var o=a.getParent().getAggregation("_anchorBar");var i=[r];var g=[r];o.getAggregation("content").forEach(function(e){e.getAggregation("customData").some(function(t){if(t.getKey()==="sectionId"&&a.getId()===t.getProperty("value")){g.push(e.getId())}})});return{affectedControls:i,displayControls:g}};return a},true);
//# sourceMappingURL=AddIFrameObjectPageLayout.js.map