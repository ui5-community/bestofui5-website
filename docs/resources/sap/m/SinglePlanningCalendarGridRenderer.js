/*!
 * OpenUI5
 * (c) Copyright 2009-2025 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/unified/calendar/CalendarDate","sap/ui/unified/calendar/CalendarUtils","sap/ui/core/date/UniversalDate","sap/ui/core/IconPool","sap/ui/core/InvisibleText","./PlanningCalendarLegend","sap/ui/unified/library","sap/ui/core/Configuration","sap/ui/core/date/UI5Date"],function(e,a,t,l,n,r,s,o,i){"use strict";var d=.125;var p=.125;var c=.0625;var g=s.CalendarDayType;var S={apiVersion:2};S.render=function(e,a){e.openStart("div",a);e.class("sapMSinglePCGrid");e.openEnd();e.renderControl(a.getAggregation("_columnHeaders"));this.renderBlockersContainer(e,a);e.openStart("div");e.attr("role","grid");e.class("sapMSinglePCGridContent");e.openEnd();this.renderRowHeaders(e,a);this.renderNowMarker(e,a);this.renderColumns(e,a);e.close("div");e.close("div")};S.renderBlockersContainer=function(t,l){var s=l._getColumns(),o=l._getBlockersToRender().iMaxlevel,i=l.getStartDate(),d=(o+1)*l._getBlockerRowHeight()+.1875,p=l._getDateFormatter(),c=l._getSpecialDates(),g=e.fromLocalJSDate(i),S=l._getColumnHeaders()._getDateTypes(g),u,f;t.openStart("div");t.attr("role","grid");t.class("sapMSinglePCBlockersRow");t.openEnd();t.openStart("div");t.attr("role","row");t.class("sapMSinglePCBlockersColumns");if(c&&l._getColumns()===1){if(S&&S[0]){u=S[0];t.class("sapUiCalItem"+u.type);f=r.findLegendItemForItem(sap.ui.getCore().byId(l._sLegendId),u)}t.class("sapMSpecialDaysInDayView")}t.style("height",d+"rem");t.openEnd();this.renderDndPlaceholders(t,l,l.getAggregation("_blockersPlaceholders"));for(var C=0;C<s;C++){var v=new e(i.getFullYear(),i.getMonth(),i.getDate()+C);t.openStart("div");t.attr("role","gridcell");t.attr("data-sap-start-date",p.format(v.toLocalJSDate()));t.attr("data-sap-end-date",p.format(v.toLocalJSDate()));t.attr("aria-labelledby",n.getStaticId("sap.m","SPC_BLOCKERS")+" "+"fullDay-"+p.format(v.toLocalJSDate())+"-Descr");t.class("sapMSinglePCBlockersColumn");t.attr("tabindex",-1);if(l._checkDateSelected(v)&&s>1){this.renderSelectedRowBorders(t,l,C,v,s,"Blocker")}if(v.isSame(new e)){t.class("sapMSinglePCBlockersColumnToday")}if(a._isWeekend(v,l._getCoreLocaleData())){t.class("sapMSinglePCBlockersColumnWeekend")}t.openEnd();t.openStart("span","fullDay-"+p.format(v.toLocalJSDate())+"-Descr");t.class("sapUiInvisibleText");t.openEnd();t.text(l._getCellStartEndInfo(v.toLocalJSDate()));if(l._sLegendId&&f){t.text(f)}t.close("span");t.close("div")}this.renderBlockers(t,l);t.close("div");t.close("div")};S.renderSelectedRowBorders=function(a,t,l,n,r,s){var o=new e(n.toLocalJSDate().getFullYear(),n.toLocalJSDate().getMonth(),n.toLocalJSDate().getDate()-1);var i=new e(n.toLocalJSDate().getFullYear(),n.toLocalJSDate().getMonth(),n.toLocalJSDate().getDate()+1);a.class("sapUiCalColumnSelected");if(l==0&&t._checkDateSelected(i)){a.class("sapUiCalColumnSelectedStart"+s)}else if(l==0&&!t._checkDateSelected(i)){a.class("sapUiCalColumnSingleSelect"+s)}else if(l===r-1&&t._checkDateSelected(o)){a.class("sapUiCalColumnSelectedEnd"+s)}else if(l===r-1&&!t._checkDateSelected(o)){a.class("sapUiCalColumnSingleSelect"+s)}else if(t._checkDateSelected(o)&&t._checkDateSelected(i)){a.class("sapUiCalColumnSelectedBetween"+s)}else if(t._checkDateSelected(o)){a.class("sapUiCalColumnSelectedEnd"+s)}else if(t._checkDateSelected(i)){a.class("sapUiCalColumnSelectedStart"+s)}else{a.class("sapUiCalColumnSingleSelect"+s)}};S.renderBlockers=function(e,a){var t=this,l=a._getBlockersToRender().oBlockersList;e.openStart("div");e.attr("role","list");e.attr("aria-labelledby",n.getStaticId("sap.m","SPC_BLOCKERS"));e.class("sapMSinglePCBlockers");e.class("sapUiCalendarRowVisFilled");e.openEnd();l.getIterator().forEach(function(l){t.renderBlockerAppointment(e,a,l)});e.close("div")};S.renderBlockerAppointment=function(t,l,r){var s=e.fromLocalJSDate(l.getStartDate()),i=r.getData(),d=e.fromLocalJSDate(i.getStartDate()),p=e.fromLocalJSDate(i.getEndDate()),c=a._daysBetween(d,s),S=a._daysBetween(p,s),u=l._getColumns(),f=l._getBlockerRowHeight(),C=r.level,v=r.width,m=i.getTooltip_AsString(),b=i.getType(),A=i.getColor(),D=i.getTitle(),_=i.getText(),y=i.getIcon(),M=i.getId(),T={role:"listitem",labelledby:{value:n.getStaticId("sap.ui.unified","APPOINTMENT"),append:true},selected:null},h=l.getAriaLabelledBy(),w=c*(100/u),E=(u-S-1)*(100/u),P=o.getRTL(),I;if(h.length>0){T["labelledby"].value=T["labelledby"].value+" "+h.join(" ")}if(D){T["labelledby"].value=T["labelledby"].value+" "+M+"-Title"}T["labelledby"].value=T["labelledby"].value+" "+M+"-Descr";if(_){T["labelledby"].value=T["labelledby"].value+" "+M+"-Text"}if(i.getTentative()){T["labelledby"].value=T["labelledby"].value+" "+n.getStaticId("sap.ui.unified","APPOINTMENT_TENTATIVE")}if(i.getSelected()){T["labelledby"].value=T["labelledby"].value+" "+n.getStaticId("sap.ui.unified","APPOINTMENT_SELECTED")}t.openStart("div",i);t.attr("data-sap-level",C);t.attr("data-sap-width",v);t.attr("tabindex",0);if(m){t.attr("title",m)}t.accessibilityState(i,T);t.class("sapMSinglePCAppointmentWrap");t.class("sapUiCalendarRowApps");if(!A&&b!==g.None){t.class("sapUiCalendarApp"+b)}if(A){if(o.getRTL()){t.style("border-right-color",A)}else{t.style("border-left-color",A)}}t.style("top",f*C+.0625+"rem");t.style(P?"right":"left",Math.max(w,0)+"%");t.style(P?"left":"right",Math.max(E,0)+"%");t.openEnd();t.openStart("div");t.class("sapUiCalendarApp");if(i.getSelected()){t.class("sapUiCalendarAppSel")}if(i.getTentative()){t.class("sapUiCalendarAppTent")}if(y){t.class("sapUiCalendarAppWithIcon")}t.openEnd();t.openStart("div");t.class("sapUiCalendarAppCont");if(A){t.style("background-color",i._getCSSColorForBackground(A))}t.openEnd();if(w<0){I=["sapUiCalendarAppArrowIconLeft","sapUiCalendarAppArrowIcon"];t.icon("sap-icon://arrow-left",I,{title:null,role:"img"})}if(y){I=["sapUiCalendarAppIcon"];var k={};k["id"]=M+"-Icon";k["title"]=null;k["role"]="img";t.icon(y,I,k)}if(D){t.openStart("span",M+"-Title");t.class("sapUiCalendarAppTitle");t.openEnd();t.text(D,true);t.close("span")}if(E<0){I=["sapUiCalendarAppArrowIconRight","sapUiCalendarAppArrowIcon"];t.icon("sap-icon://arrow-right",I,{title:null,role:"img"})}t.openStart("span",M+"-Descr");t.class("sapUiInvisibleText");t.openEnd();t.text(l._getAppointmentAnnouncementInfo(i));t.close("span");t.close("div");t.close("div");t.close("div")};S.renderRowHeaders=function(e,a){var t=a._getVisibleStartHour(),l=a._getVisibleEndHour(),n=i.getInstance(),r=a._getHoursFormat(),s=a._getAMPMFormat();e.openStart("div");e.class("sapMSinglePCRowHeaders");e.openEnd();for(var o=t;o<=l;o++){n.setHours(o);e.openStart("span");e.class("sapMSinglePCRowHeader");e.class("sapMSinglePCRowHeader"+o);if(a._shouldHideRowHeader(o)){e.class("sapMSinglePCRowHeaderHidden")}e.openEnd();e.text(r.format(n));if(a._hasAMPM()){e.openStart("span");e.class("sapMSinglePCRowHeaderAMPM");e.openEnd();e.text(" "+s.format(n));e.close("span")}e.close("span")}e.close("div")};S.renderColumns=function(t,l){var r=l._getColumns(),s=l.getStartDate(),o=l._getAppointmentsToRender();t.openStart("div");t.attr("role","grid");t.attr("aria-labelledby",n.getStaticId("sap.m","SPC_APPOINTMENTS"));t.class("sapMSinglePCColumns");t.openEnd();for(var i=0;i<r;i++){var d=new e(s.getFullYear(),s.getMonth(),s.getDate()+i),p=l._getDateFormatter(),c=p.format(d.toLocalJSDate());t.openStart("div");t.attr("role","row");t.attr("data-sap-day",c);t.class("sapMSinglePCColumn");if(l._checkDateSelected(d)&&r>1){this.renderSelectedRowBorders(t,l,i,d,r,"Column")}if(d.isSame(new e)){t.class("sapMSinglePCColumnToday")}if(a._isWeekend(d,l._getCoreLocaleData())||l._isNonWorkingDay(d)){t.class("sapMSinglePCColumnWeekend")}t.openEnd();this.renderDndPlaceholders(t,l,l._dndPlaceholdersMap[d]);this.renderRows(t,l,c);this.renderAppointments(t,l,o[c],d,i);t.close("div")}t.close("div")};S.renderDndPlaceholders=function(e,a,t){e.openStart("div");e.class("sapMSinglePCOverlay");e.openEnd();t.forEach(e.renderControl,e);e.close("div")};S.renderRows=function(e,a,t){var l=a._getVisibleStartHour(),n=a._getVisibleEndHour(),r=a._getDateFormatter(),s,o;for(var d=l;d<=n;d++){s=a._parseDateStringAndHours(t,d);o=i.getInstance(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours()+1);e.openStart("div");e.attr("role","gridcell");e.class("sapMSinglePCRow");if(!a._isVisibleHour(d)){e.class("sapMSinglePCNonWorkingRow")}e.attr("data-sap-hour",d);e.attr("data-sap-start-date",r.format(s));e.attr("data-sap-end-date",r.format(o));e.attr("aria-labelledby",r.format(s)+"-Descr");e.attr("tabindex",-1);e.openEnd();e.openStart("span",r.format(s)+"-Descr");e.class("sapUiInvisibleText");e.openEnd();e.text(a._getCellStartEndInfo(s,o));e.close("span");e.close("div")}};S.renderAppointments=function(e,a,t,l,n){var r=this,s=0;if(t){e.openStart("div");e.attr("role","list");e.class("sapMSinglePCAppointments");e.class("sapUiCalendarRowVisFilled");e.openEnd();t.oAppointmentsList.getIterator().forEach(function(o){var i=t.iMaxLevel,d=o.level,p=o.width,c=o.getData();r.renderAppointment(e,a,i,d,p,c,l,n,s);s++});e.close("div")}};S.renderAppointment=function(l,r,s,i,S,u,f,C,v){var m=e.fromLocalJSDate(r.getStartDate()),b=new e(m),A=r._getRowHeight(),D=new t(f.getYear(),f.getMonth(),f.getDate(),r._getVisibleStartHour()),_=new t(f.getYear(),f.getMonth(),f.getDate(),r._getVisibleEndHour(),59,59),y=u.getStartDate(),M=u.getEndDate(),T=e.fromLocalJSDate(y),h=e.fromLocalJSDate(M),w=u.getTooltip_AsString(),E=u.getType(),P=u.getColor(),I=u.getTitle(),k=u.getText(),U=u.getIcon(),L=u.getId(),R={role:"listitem",labelledby:{value:n.getStaticId("sap.ui.unified","APPOINTMENT"),append:true},selected:null},B=r.getAriaLabelledBy(),x=D.getTime()>y.getTime(),H=_.getTime()<M.getTime(),N=x?0:r._calculateTopPosition(y),J=H?0:r._calculateBottomPosition(M),F=100/(s+1),V=u.getParent().getEnableAppointmentsDragAndDrop(),W=r.getProperty("scaleFactor"),O=2*W,Y,z,j,G,K;b.setDate(b.getDate()+r._getColumns()-1);Y=a._daysBetween(T,m);z=a._daysBetween(b,h);j=f.isSame(m);G=f.isSame(b);if(B.length>0){R["labelledby"].value=R["labelledby"].value+" "+B.join(" ")}if(I){R["labelledby"].value=R["labelledby"].value+" "+L+"-Title"}R["labelledby"].value=R["labelledby"].value+" "+L+"-Descr";if(k){R["labelledby"].value=R["labelledby"].value+" "+L+"-Text"}if(u.getTentative()){R["labelledby"].value=R["labelledby"].value+" "+n.getStaticId("sap.ui.unified","APPOINTMENT_TENTATIVE")}if(u.getSelected()){R["labelledby"].value=R["labelledby"].value+" "+n.getStaticId("sap.ui.unified","APPOINTMENT_SELECTED")}l.openStart("div",u.getId()+"-"+C+"_"+v);l.attr("draggable",V);l.attr("data-sap-ui-draggable",V);l.attr("data-sap-ui-related",u.getId());l.attr("data-sap-level",i);l.attr("data-sap-width",S);l.attr("tabindex",0);if(w){l.attr("title",w)}l.accessibilityState(u,R);l.class("sapMSinglePCAppointmentWrap");l.class("sapUiCalendarRowApps");if(!P&&E!==g.None){l.class("sapUiCalendarApp"+E)}if(P){if(o.getRTL()){l.style("border-right-color",P)}else{l.style("border-left-color",P)}}l.style("top",N+"rem");l.style("bottom",J+"rem");l.style(o.getRTL()?"right":"left",F*i+"%");l.style("width",F*S+"%");l.openEnd();l.openStart("div");l.class("sapUiCalendarApp");l.style("min-height",(A-(d+p+c)*W)/O+"rem");if(u.getSelected()){l.class("sapUiCalendarAppSel")}if(u.getTentative()){l.class("sapUiCalendarAppTent")}if(U){l.class("sapUiCalendarAppWithIcon")}l.openEnd();l.openStart("div");l.class("sapUiCalendarAppCont");if(P){l.style("background-color",u._getCSSColorForBackground(P))}l.openEnd();if(j&&Y<0){K=["sapUiCalendarAppArrowIconLeft","sapUiCalendarAppArrowIcon"];l.icon("sap-icon://arrow-left",K,{title:null,role:"img"})}if(U){K=["sapUiCalendarAppIcon"];var q={};q["id"]=L+"-Icon";q["title"]=null;q["role"]="img";l.icon(U,K,q)}l.openStart("div");l.class("sapUiCalendarAppointmentWrapper");l.openEnd();if(I){l.openStart("span",L+"-Title");l.class("sapUiCalendarAppTitle");l.openEnd();l.text(I,true);l.close("span")}if(k){l.openStart("span",L+"-Text");l.class("sapUiCalendarAppText");l.openEnd();l.text(k,true);l.close("span")}l.close("div");if(G&&z<0){K=["sapUiCalendarAppArrowIconRight","sapUiCalendarAppArrowIcon"];l.icon("sap-icon://arrow-right",K,{title:null,role:"img"})}l.openStart("span",L+"-Descr");l.class("sapUiInvisibleText");l.openEnd();l.text(r._getAppointmentAnnouncementInfo(u));l.close("span");l.close("div");if(r.getEnableAppointmentsResize()){this.renderResizeHandles(l,!x,!H)}l.close("div");l.close("div")};S.renderNowMarker=function(e,a){var t=i.getInstance();e.openStart("div",a.getId()+"-nowMarker");e.style("top",a._calculateTopPosition(t)+"rem");e.class("sapMSinglePCNowMarker");if(!a._isVisibleHour(t.getHours())){e.class("sapMSinglePCNowMarkerHidden")}e.openEnd();e.openStart("span",a.getId()+"-nowMarkerText");e.class("sapMSinglePCNowMarkerText");e.openEnd();e.text(a._formatTimeAsString(t));if(a._hasAMPM()){e.openStart("span",a.getId()+"-nowMarkerAMPM");e.class("sapMSinglePCNowMarkerAMPM");e.openEnd();e.text(a._addAMPM(t));e.close("span")}e.close("span");e.close("div")};S.renderResizeHandles=function(e,a,t){if(t){e.openStart("span");e.class("sapMSinglePCAppResizeHandleBottom");e.openEnd();e.close("span")}if(a){e.openStart("span");e.class("sapMSinglePCAppResizeHandleTop");e.openEnd();e.close("span")}};return S},true);
//# sourceMappingURL=SinglePlanningCalendarGridRenderer.js.map