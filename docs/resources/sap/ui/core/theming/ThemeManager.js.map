{"version":3,"file":"ThemeManager.js","names":["sap","ui","define","assert","Eventing","Log","BaseConfig","Localization","each","LoaderExtensions","Device","Global","Library","Theming","ThemeHelper","includeStylesheet","oEventing","maxThemeCheckCycles","mAllLoadedLibraries","CUSTOMCSSCHECK","_iCount","_CUSTOMID","_customCSSAdded","_themeCheckedForCustom","_sFallbackTheme","_mThemeFallback","_sThemeCheckId","ThemeManager","themeLoaded","checkThemeApplied","reset","delayedCheckTheme","fireThemeApplied","clearTimeout","_includeLibraryThemeAndEnsureThemeRoot","oLibThemingInfo","sLibName","name","_ensureThemeRoot","getTheme","preloadedCss","includeLibraryTheme","variant","sVariant","vQueryOrLibInfo","undefined","sQuery","getLibraryCssQueryParams","sCssVariablesParam","get","type","Type","String","external","sCssVars","test","sRtl","getRTL","sLibFileName","sLibId","length","indexOf","substring","sLinkId","sSkeletonLinkId","bCssVariables","document","querySelector","sCssBasePath","URL","_getThemePath","baseURI","toString","oTmpLink","createElement","href","sCssPathAndName","sCssVariablesPathAndName","fnAddFoucmarker","info","Parameters","require","_addLibraryTheme","sThemeName","toUrl","replace","_updateThemeUrls","bSuppressFOUC","oQueryResult","querySelectorAll","Array","prototype","forEach","call","oHTMLElement","updateThemeUrl","_attachThemeApplied","fnCallback","attachEvent","_detachThemeApplied","detachEvent","ThemeParameters","_reset","fireEvent","theme","checkTheme","sPath","bIsStandardTheme","res","aFailedLibs","checkLib","lib","sStyleId","currentRes","checkAndRemoveStyle","prefix","id","getElementById","checkCustom","sCustomCssPath","sLibCssQueryParams","debug","oCustomCssLink","remove","oStyle","getAttribute","sheet","hasSheetCssRules","push","sLib","oThemeMetaData","getMetadata","Extends","warning","cssFile","window","style","getComputedStyle","content","getPropertyValue","browser","safari","html","documentElement","classList","add","e","error","aRules","safeAccessSheetCssRules","i","selectorText","bFirst","bEmergencyExit","iDelay","setTimeout","oLink","dataset","sapUiFoucmarker","applyTheme","oTheme","sTheme","new","old","sThemeRoot","getThemeRoot","slice","registerResourcePath","iQueryIndex","search","sStandardLibFilePrefix","sRTL","sHref","pos","mLinkId","exec","isArray","lastIndexOf","oLibInfo","getVersionedLibCss","version","versioninfo","attachChange","oEvent","mThemeRoots","themeRoots","forceUpdate","registerThemeManager"],"sources":["ThemeManager-dbg.js"],"mappings":"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"}