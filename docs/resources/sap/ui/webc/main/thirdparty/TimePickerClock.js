sap.ui.define(["exports","sap/ui/webc/common/thirdparty/base/UI5Element","sap/ui/webc/common/thirdparty/base/decorators/customElement","sap/ui/webc/common/thirdparty/base/decorators/property","sap/ui/webc/common/thirdparty/base/decorators/event","sap/ui/webc/common/thirdparty/base/renderer/LitRenderer","sap/ui/webc/common/thirdparty/base/types/Integer","./generated/templates/TimePickerClockTemplate.lit","./generated/themes/TimePickerClock.css"],function(e,t,i,s,o,a,l,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;t=u(t);i=u(i);s=u(s);o=u(o);a=u(a);l=u(l);n=u(n);r=u(r);function u(e){return e&&e.__esModule?e:{default:e}}var c=void 0&&(void 0).__decorate||function(e,t,i,s){var o=arguments.length,a=o<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,i):s,l;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(e,t,i,s);else for(var n=e.length-1;n>=0;n--)if(l=e[n])a=(o<3?l(a):o>3?l(t,i,a):l(t,i))||a;return o>3&&a&&Object.defineProperty(t,i,a),a};const d=200;const h=100;const p=6;const m="ui5-tp-clock-number";const f="ui5-tp-clock-number-hover";const _="ui5-tp-clock-selected";const v="ui5-tp-clock-mid-dot";let g=class e extends t.default{constructor(){super();this._fnOnMouseOutUp=()=>{this._mouseOrTouchDown=false}}get classes(){return{clock:{"ui5-tp-clock":true,"ui5-tp-clock-inner":this.showInnerCircle,"ui5-tp-clock-active":this.active}}}onEnterDOM(){document.addEventListener("mouseup",this._fnOnMouseOutUp,false)}onExitDOM(){document.removeEventListener("mouseup",this._fnOnMouseOutUp,false)}onBeforeRendering(){this._prepareClockItems();const e=this._fixReplacementValue(this.selectedValue);this._updateSelectedValueObject(e)}_fixReplacementValue(e){let t=e;const i=this.itemMax*(this.showInnerCircle?2:1);if(t===0){t=i}if(t===i&&this.lastItemReplacement!==-1){t=this.lastItemReplacement}return t}_updateSelectedValueObject(e){if(e===-1){this._selectedItem={showMarker:false};return}const t=e>=this.itemMin&&e<=this.itemMax||!this.showInnerCircle&&e===this.lastItemReplacement;const i=(e>=this.itemMin+this.itemMax&&e<=this.itemMax*2||e===this.lastItemReplacement)&&this.showInnerCircle;const s=360/(this.itemMax-this.itemMin+1);const o=this.lastItemReplacement===-1||!this.prependZero?e.toString():e.toString().padStart(2,"0");let a=t||i?e*s:undefined;if(a!==undefined){a%=360}this._selectedItem={angle:a,item:t?e.toString():"",innerItem:i?o:"",showMarker:t||i,itemClasses:m+(t?` ${_}`:""),innerItemClasses:m+(i?` ${_}`:""),outerStyles:{transform:`translate(-50%) rotate(${a||0}deg)`},innerStyles:{transform:`rotate(-${a||0}deg)`}}}_prepareClockItems(){const e=[];let t=this.displayStep;let i;let s;let o;this._items=[];for(o=this.itemMin;o<=this.itemMax;o++){e.push({item:o.toString(),innerItem:this.showInnerCircle?(o+this.itemMax).toString():undefined})}if(this.lastItemReplacement!==-1){if(this.showInnerCircle&&this.prependZero){e[e.length-1].innerItem=this.lastItemReplacement.toString().padStart(2,"0")}else{e[e.length-1].item=this.lastItemReplacement.toString()}}const a=360/p/e.length;if(this.valueStep*a>t){t=this.valueStep*a}for(o=1;o<=60;o++){s=o/a-1;i=o%t!==0?{}:e[s];i.angle=o*p;i.outerStyles={transform:`translate(-50%) rotate(${o*6}deg)`};i.innerStyles={transform:`rotate(-${o*6}deg)`};this._items.push(i)}}_getClockCoverContainerDomRef(){const e=this.getDomRef();return e&&e.querySelector(".ui5-tp-clock-cover")}_getMaxValue(){return this.showInnerCircle?this.itemMax*2:this.itemMax}_outerHeight(e){if(!e){return 0}const t=window.getComputedStyle(e);return e.offsetHeight+parseInt(t.marginTop)+parseInt(t.marginBottom)}_hoveredId(e){if(e===this._getMaxValue()&&this.lastItemReplacement!==-1){e=this.lastItemReplacement}const t=this.showInnerCircle&&e===this.lastItemReplacement&&this.prependZero?e.toString().padStart(2,"0"):e.toString();return`#${this._id}-${t}`}_getStringValue(e){return this.prependZero?e.toString().padStart(2,"0"):e.toString()}_calculateDimensions(){const e=this.getDomRef();const t=window.pageXOffset||document.documentElement.scrollLeft;const i=window.pageYOffset||document.documentElement.scrollTop;if(!e){return}const s=this.getDomRef();const o=s.querySelector(`.${v}`);const a=s.querySelector(`.${m}`);const l=Math.round(e.offsetHeight/2);const n=this._outerHeight(o);const r=this._outerHeight(a);const u=e.getBoundingClientRect();this._dimensionParameters={radius:l,centerX:l,centerY:l,dotHeight:n,numberHeight:r,outerMax:l,outerMin:l-r,innerMax:l-r-1,innerMin:l-r*2-1,offsetX:u.left+t,offsetY:u.top+i}}_calculatePosition(e,t){const i=e-this._dimensionParameters.offsetX+1-this._dimensionParameters.radius;const s=t-this._dimensionParameters.offsetY+1-this._dimensionParameters.radius;const o=i>=0?0:180;const a=Math.atan(s/i)*180/Math.PI+90+o;const l=360/this.itemMax*this.valueStep;const n=Math.sqrt(i*i+s*s);const r=n<=this._dimensionParameters.outerMax&&n>(this.showInnerCircle?this._dimensionParameters.outerMin:this._dimensionParameters.innerMin);const u=this.showInnerCircle&&n<=this._dimensionParameters.innerMax&&n>this._dimensionParameters.innerMin;const c=n<=this._dimensionParameters.outerMax&&n>this._dimensionParameters.outerMin;const d=u;let h=Math.round((a===0?360:a)/l)*l;if(h===0){h=360}if(u||r){this._selectedValue=h/l*this.valueStep;if(u){this._selectedValue+=this.itemMax}}else{this._selectedValue=-1}this._hoveredValue=d||c?this._selectedValue:-1;if(this._selectedValue===this._getMaxValue()&&this.lastItemReplacement!==-1){this._selectedValue=this.lastItemReplacement}}_changeValueAnimation(e,t=false){const i=this.itemMax*(this.showInnerCircle?2:1);let s=this._movSelectedValue;let o=e;let a=1;let l;let n;let r;if(!t){l=Math.abs(s-o);n=i-l;if(s<o){if(n<l){s+=i;a=-1}}else if(n<l){o+=i}else{a=-1}r=s===o?0:Math.ceil(d/Math.abs(s-o));this._animationInProgress=true;this._selectNextNumber(s,o,a,i,e,r)}else{this._setSelectedValue(e)}}_selectNextNumber(e,t,i,s,o,a){const l=e>s?e-s:e;if(e===t){this._animationInProgress=false}this._setSelectedValue(l);if(e!==t){e+=i;setTimeout(()=>{this._selectNextNumber(e,t,i,s,o,a)},a)}else{setTimeout(()=>{this.fireEvent("change",{value:o,stringValue:this._getStringValue(o),finalChange:true})},h)}}_modifyValue(e){let t=this.selectedValue;const i=this.lastItemReplacement;const s=this.itemMin;const o=this.itemMax*(this.showInnerCircle?2:1);let a=this.valueStep;let l;if(t%a!==0){l=e?Math.ceil(t/a)*a:Math.floor(t/a)*a;a=Math.abs(t-l)}if(t===i){t=o}if(e){t+=a;if(t>o){t-=o}}else{t-=a;if(t<s){t=o}}this._setSelectedValue(t)}_setSelectedValue(e){const t=this._fixReplacementValue(e);this.selectedValue=t;this.fireEvent("change",{value:t,stringValue:this._getStringValue(t),finalChange:false});this._updateSelectedValueObject(t)}_onTouchStart(e){this._cancelTouchOut=false;if(this.disabled||this._mouseOrTouchDown){return}const t=e.type==="touchstart"?e.touches[0].pageX:e.pageX;const i=e.type==="touchstart"?e.touches[0].pageY:e.pageY;this._movSelectedValue=this.selectedValue;this._calculateDimensions();this._calculatePosition(t,i);this._mouseOrTouchDown=true}_onTouchMove(e){let t;const i=this.getDomRef();e.preventDefault();if(this._mouseOrTouchDown){const t=e.type==="touchmove"?e.touches[0].pageX:e.pageX;const i=e.type==="touchmove"?e.touches[0].pageY:e.pageY;this._calculatePosition(t,i);if(!this.disabled&&this._selectedValue!==-1&&this._selectedValue!==this._movSelectedValue){this._setSelectedValue(this._selectedValue);this._movSelectedValue=0+this._selectedValue}}else if(e.type==="mousemove"){if(!this._dimensionParameters.radius){this._calculateDimensions()}this._calculatePosition(e.pageX,e.pageY);if(this.displayStep>1&&this._hoveredValue!==-1){this._hoveredValue=Math.round(this._hoveredValue/this.displayStep)*this.displayStep}if(!this.disabled&&this._hoveredValue!==this._prevHoveredValue){t=i.querySelector(this._hoveredId(this._prevHoveredValue));t&&t.classList.remove(f);this._prevHoveredValue=this._hoveredValue;t=i.querySelector(this._hoveredId(this._prevHoveredValue));t&&t.classList.add(f)}}}_onTouchEnd(e){if(!this._mouseOrTouchDown){return}this._mouseOrTouchDown=false;e.preventDefault();if(this.disabled||this._selectedValue===-1){return}if(!this._cancelTouchOut){this._changeValueAnimation(this._selectedValue)}}_onMouseWheel(e){const t=e.detail?e.detail>0:e.deltaY>0||e.deltaX>0;e.preventDefault();if(!this._mouseOrTouchDown){this._modifyValue(t)}}_onMouseOut(){const e=this.getDomRef().querySelector(this._hoveredId(this._hoveredValue));e&&e.classList.remove(f);this._hoveredValue=-1;this._prevHoveredValue=-1}};c([(0,s.default)({type:Boolean})],g.prototype,"disabled",void 0);c([(0,s.default)({type:Boolean})],g.prototype,"active",void 0);c([(0,s.default)({validator:l.default,defaultValue:-1})],g.prototype,"itemMin",void 0);c([(0,s.default)({validator:l.default,defaultValue:-1})],g.prototype,"itemMax",void 0);c([(0,s.default)({type:Boolean})],g.prototype,"showInnerCircle",void 0);c([(0,s.default)({type:String,defaultValue:undefined})],g.prototype,"label",void 0);c([(0,s.default)({type:Boolean})],g.prototype,"hideFractions",void 0);c([(0,s.default)({validator:l.default,defaultValue:-1})],g.prototype,"lastItemReplacement",void 0);c([(0,s.default)({type:Boolean})],g.prototype,"prependZero",void 0);c([(0,s.default)({validator:l.default,defaultValue:-1})],g.prototype,"selectedValue",void 0);c([(0,s.default)({validator:l.default,defaultValue:5})],g.prototype,"displayStep",void 0);c([(0,s.default)({validator:l.default,defaultValue:1})],g.prototype,"valueStep",void 0);c([(0,s.default)({type:Object,multiple:true})],g.prototype,"_items",void 0);c([(0,s.default)({type:Object})],g.prototype,"_selectedItem",void 0);c([(0,s.default)({type:Object})],g.prototype,"_dimensionParameters",void 0);c([(0,s.default)({type:Boolean,noAttribute:true})],g.prototype,"_mouseOrTouchDown",void 0);c([(0,s.default)({type:Boolean,noAttribute:true})],g.prototype,"_cancelTouchOut",void 0);c([(0,s.default)({validator:l.default,defaultValue:-1,noAttribute:true})],g.prototype,"_selectedValue",void 0);c([(0,s.default)({validator:l.default,defaultValue:-1,noAttribute:true})],g.prototype,"_movSelectedValue",void 0);c([(0,s.default)({validator:l.default,defaultValue:-1,noAttribute:true})],g.prototype,"_hoveredValue",void 0);c([(0,s.default)({validator:l.default,defaultValue:-1,noAttribute:true})],g.prototype,"_prevHoveredValue",void 0);c([(0,s.default)({type:Boolean,noAttribute:true})],g.prototype,"_animationInProgress",void 0);g=c([(0,i.default)({tag:"ui5-time-picker-clock",renderer:a.default,styles:r.default,template:n.default}),(0,o.default)("change",{detail:{value:{type:l.default},stringValue:{type:String},finalChange:{type:Boolean}}})],g);g.define();var y=g;e.default=y});
//# sourceMappingURL=TimePickerClock.js.map