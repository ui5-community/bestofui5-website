sap.ui.define(["exports","sap/ui/webc/common/thirdparty/base/decorators/customElement","sap/ui/webc/common/thirdparty/base/decorators/event","sap/ui/webc/common/thirdparty/base/decorators/property","sap/ui/webc/common/thirdparty/base/decorators/slot","sap/ui/webc/common/thirdparty/localization/dates/transformDateToSecondaryType","sap/ui/webc/common/thirdparty/localization/dates/convertMonthNumbersToMonthNames","sap/ui/webc/common/thirdparty/localization/dates/CalendarDate","sap/ui/webc/common/thirdparty/base/Render","sap/ui/webc/common/thirdparty/base/Keys","sap/ui/webc/common/thirdparty/localization/getCachedLocaleDataInstance","sap/ui/webc/common/thirdparty/base/locale/getLocale","sap/ui/webc/common/thirdparty/localization/DateFormat","./CalendarDate","./CalendarPart","./CalendarHeader","./DayPicker","./MonthPicker","./YearPicker","./types/CalendarSelectionMode","./types/CalendarPickersMode","sap/ui/webc/common/thirdparty/localization/features/calendar/Gregorian","./generated/templates/CalendarTemplate.lit","./generated/themes/Calendar.css"],function(e,t,a,r,i,s,n,o,d,c,u,l,h,p,f,y,_,m,D,P,k,T,g,v){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;t=b(t);a=b(a);r=b(r);i=b(i);s=b(s);n=b(n);o=b(o);u=b(u);l=b(l);h=b(h);p=C(p);f=b(f);y=b(y);_=b(_);m=b(m);D=b(D);P=b(P);k=b(k);g=b(g);v=b(v);function M(e){if(typeof WeakMap!=="function")return null;var t=new WeakMap;var a=new WeakMap;return(M=function(e){return e?a:t})(e)}function C(e,t){if(!t&&e&&e.__esModule){return e}if(e===null||typeof e!=="object"&&typeof e!=="function"){return{default:e}}var a=M(t);if(a&&a.has(e)){return a.get(e)}var r={};var i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e){if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var n=i?Object.getOwnPropertyDescriptor(e,s):null;if(n&&(n.get||n.set)){Object.defineProperty(r,s,n)}else{r[s]=e[s]}}}r.default=e;if(a){a.set(e,r)}return r}function b(e){return e&&e.__esModule?e:{default:e}}var w=void 0&&(void 0).__decorate||function(e,t,a,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,a):r,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(e,t,a,r);else for(var o=e.length-1;o>=0;o--)if(n=e[o])s=(i<3?n(s):i>3?n(t,a,s):n(t,a))||s;return i>3&&s&&Object.defineProperty(t,a,s),s};let O=class e extends f.default{get _selectedDatesTimestamps(){return this.dates.map(e=>{const t=e.value;const a=t&&!!this.getFormat().parse(t);return a?this._getTimeStampFromString(t)/1e3:undefined}).filter(e=>!!e)}_setSelectedDates(e){const t=e.map(e=>this.getFormat().format(new Date(e*1e3),true));const a=[...this.dates].map(e=>e.value);this.dates.filter(e=>!t.includes(e.value)).forEach(e=>{this.removeChild(e)});t.filter(e=>!a.includes(e)).forEach(e=>{const t=document.createElement(p.default.getMetadata().getTag());t.value=e;this.appendChild(t)})}_normalizeCurrentPicker(){if(this._currentPicker==="day"&&this._pickersMode!==k.default.DAY_MONTH_YEAR){this._currentPicker="month"}if(this._currentPicker==="month"&&this._pickersMode===k.default.YEAR){this._currentPicker="year"}}onBeforeRendering(){this._normalizeCurrentPicker()}async onAfterRendering(){await(0,d.renderFinished)();this._previousButtonDisabled=!this._currentPickerDOM._hasPreviousPage();this._nextButtonDisabled=!this._currentPickerDOM._hasNextPage();const e=h.default.getDateInstance({format:"y",calendarType:this.primaryCalendarType});const t=(0,u.default)((0,l.default)());this._headerMonthButtonText=t.getMonthsStandAlone("wide",this.primaryCalendarType)[this._calendarDate.getMonth()];if(this._currentPicker==="year"){const t=new o.default(this._calendarDate,this._primaryCalendarType);const a=new o.default(this._calendarDate,this._primaryCalendarType);t.setYear(this._currentPickerDOM._firstYear);a.setYear(this._currentPickerDOM._lastYear);this._headerYearButtonText=`${e.format(t.toLocalJSDate(),true)} - ${e.format(a.toLocalJSDate(),true)}`}else{this._headerYearButtonText=String(e.format(this._localDate,true))}this._secondaryCalendarType&&this._setSecondaryCalendarTypeButtonText()}onHeaderShowMonthPress(e){this._currentPickerDOM._autoFocus=false;this._currentPicker="month";this.fireEvent("show-month-press",e)}onHeaderShowYearPress(e){this._currentPickerDOM._autoFocus=false;this._currentPicker="year";this.fireEvent("show-year-press",e)}get _currentPickerDOM(){return this.shadowRoot.querySelector(`[ui5-${this._currentPicker}picker]`)}onHeaderPreviousPress(){this._currentPickerDOM._showPreviousPage()}onHeaderNextPress(){this._currentPickerDOM._showNextPage()}_setSecondaryCalendarTypeButtonText(){const e=h.default.getDateInstance({format:"y",calendarType:this._secondaryCalendarType});if(this._currentPicker==="year"){const t=new o.default(this._calendarDate,this._primaryCalendarType);const a=new o.default(this._calendarDate,this._primaryCalendarType);t.setYear(this._currentPickerDOM._firstYear);a.setYear(this._currentPickerDOM._lastYear);const r=(0,s.default)(this.primaryCalendarType,this._secondaryCalendarType,t.valueOf()/1e3,true).firstDate;const i=(0,s.default)(this.primaryCalendarType,this._secondaryCalendarType,a.valueOf()/1e3,true).lastDate;this._headerYearButtonTextSecType=`${e.format(r.toLocalJSDate(),true)} - ${e.format(i.toLocalJSDate(),true)}`}else{this._headerYearButtonTextSecType=String(e.format(this._localDate,true))}}get secondaryCalendarTypeButtonText(){if(!this._secondaryCalendarType){return}const e=new Date(this._timestamp*1e3);const t=h.default.getDateInstance({format:"y",calendarType:this._secondaryCalendarType});const a=(0,s.default)(this._primaryCalendarType,this._secondaryCalendarType,this._timestamp);const r=(0,n.default)(a.firstDate.getMonth(),a.lastDate.getMonth(),this._secondaryCalendarType);const i=t.format(e,true);return{yearButtonText:i,monthButtonText:r.text,monthButtonInfo:r.textInfo}}get _isHeaderMonthButtonHidden(){return this._currentPicker==="month"||this._currentPicker==="year"}get _isDayPickerHidden(){return this._currentPicker!=="day"}get _isMonthPickerHidden(){return this._currentPicker!=="month"}get _isYearPickerHidden(){return this._currentPicker!=="year"}_fireEventAndUpdateSelectedDates(e){const t=e.map(e=>{const t=o.default.fromTimestamp(e*1e3,this._primaryCalendarType);return this.getFormat().format(t.toUTCJSDate(),true)});const a=!this.fireEvent("selected-dates-change",{timestamp:this.timestamp,dates:[...e],values:t},true);if(!a){this._setSelectedDates(e)}}onSelectedDatesChange(e){this.timestamp=e.detail.timestamp;this._fireEventAndUpdateSelectedDates(e.detail.dates)}onSelectedMonthChange(e){this.timestamp=e.detail.timestamp;if(this._pickersMode===k.default.DAY_MONTH_YEAR){this._currentPicker="day"}else{this._fireEventAndUpdateSelectedDates([this.timestamp])}this._currentPickerDOM._autoFocus=true}onSelectedYearChange(e){this.timestamp=e.detail.timestamp;if(this._pickersMode===k.default.DAY_MONTH_YEAR){this._currentPicker="day"}else if(this._pickersMode===k.default.MONTH_YEAR){this._currentPicker="month"}else{this._fireEventAndUpdateSelectedDates([this.timestamp])}this._currentPickerDOM._autoFocus=true}onNavigate(e){this.timestamp=e.detail.timestamp}_onkeydown(e){if((0,c.isF4)(e)&&this._currentPicker!=="month"){this._currentPicker="month"}if((0,c.isF4Shift)(e)&&this._currentPicker!=="year"){this._currentPicker="year"}}get selectedDates(){return this._selectedDatesTimestamps}set selectedDates(e){this._setSelectedDates(e)}};w([(0,r.default)({type:P.default,defaultValue:P.default.Single})],O.prototype,"selectionMode",void 0);w([(0,r.default)({type:Boolean})],O.prototype,"hideWeekNumbers",void 0);w([(0,r.default)({defaultValue:"day"})],O.prototype,"_currentPicker",void 0);w([(0,r.default)({type:Boolean})],O.prototype,"_previousButtonDisabled",void 0);w([(0,r.default)({type:Boolean})],O.prototype,"_nextButtonDisabled",void 0);w([(0,r.default)()],O.prototype,"_headerMonthButtonText",void 0);w([(0,r.default)()],O.prototype,"_headerYearButtonText",void 0);w([(0,r.default)()],O.prototype,"_headerYearButtonTextSecType",void 0);w([(0,r.default)({type:k.default,defaultValue:k.default.DAY_MONTH_YEAR,noAttribute:true})],O.prototype,"_pickersMode",void 0);w([(0,i.default)({type:HTMLElement,invalidateOnChildChange:true,default:true})],O.prototype,"dates",void 0);O=w([(0,t.default)({tag:"ui5-calendar",fastNavigation:true,template:g.default,styles:v.default,dependencies:[p.default,y.default,_.default,m.default,D.default]}),(0,a.default)("selected-dates-change",{detail:{dates:{type:Array},values:{type:Array}}}),(0,a.default)("show-month-press"),(0,a.default)("show-year-press")],O);O.define();var S=O;e.default=S});
//# sourceMappingURL=Calendar.js.map