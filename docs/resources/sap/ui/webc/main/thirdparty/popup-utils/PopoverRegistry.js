sap.ui.define(["exports","sap/ui/webc/common/thirdparty/base/util/PopupUtils","../Popover","./OpenedPopupsRegistry"],function(e,t,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.removeOpenedPopover=e.getRegistry=e.addOpenedPopover=void 0;let s;const r=300;const c=[];const i=()=>{c.forEach(e=>{e.instance.reposition()})};const a=()=>{if(document.activeElement.tagName==="IFRAME"){E().reverse().forEach(e=>e.instance.close(false,false,true))}};const p=()=>{s=setInterval(()=>{i();a()},r)};const l=()=>{clearInterval(s)};const d=()=>{document.addEventListener("scroll",i,{capture:true})};const u=()=>{document.removeEventListener("scroll",i,{capture:true})};const v=e=>{e&&e.shadowRoot.addEventListener("scroll",i,{capture:true})};const f=e=>{e&&e.shadowRoot.removeEventListener("scroll",i,{capture:true})};const h=()=>{document.addEventListener("mousedown",m)};const g=()=>{document.removeEventListener("mousedown",m)};const m=e=>{const n=(0,o.getOpenedPopups)();if(n.length===0){return}const s=(0,sap.ui.require("sap/ui/webc/main/thirdparty/Popover").instanceOfPopover)(n[n.length-1].instance);if(!s){return}for(let o=n.length-1;o!==-1;o--){const s=n[o].instance;if(s.isModal||s.isOpenerClicked(e)){return}if((0,t.isClickInRect)(e,s.getBoundingClientRect())){break}s.close()}};const P=e=>{const t=R(e);(0,o.addOpenedPopup)(e,t);c.push({instance:e,parentPopovers:t});v(e);if(c.length===1){d();h();p()}};e.addOpenedPopover=P;const O=e=>{const t=[e];for(let n=0;n<c.length;n++){const o=c[n].parentPopovers.indexOf(e);if(c[n].parentPopovers.length>0&&o>-1){t.push(c[n].instance)}}for(let e=t.length-1;e>=0;e--){for(let n=0;n<c.length;n++){let s=-1;if(t[e]===c[n].instance){s=n}if(s>=0){(0,o.removeOpenedPopup)(c[s].instance);f(c[s].instance);const e=c.splice(s,1);e[0].instance.close(false,true)}}}if(!c.length){u();g();l()}};e.removeOpenedPopover=O;const E=()=>c;e.getRegistry=E;const R=e=>{let t=e.parentNode;const n=[];while(t&&t.parentNode){for(let e=0;e<c.length;e++){if(t===c[e].instance){n.push(t)}}t=t.parentNode}return n}});
//# sourceMappingURL=PopoverRegistry.js.map