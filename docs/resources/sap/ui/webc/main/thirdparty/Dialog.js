sap.ui.define(["exports","sap/ui/webc/common/thirdparty/base/Device","sap/ui/webc/common/thirdparty/base/decorators/customElement","sap/ui/webc/common/thirdparty/base/decorators/slot","sap/ui/webc/common/thirdparty/base/decorators/property","sap/ui/webc/common/thirdparty/base/util/clamp","sap/ui/webc/common/thirdparty/base/Keys","sap/ui/webc/common/thirdparty/base/types/ValueState","sap/ui/webc/common/thirdparty/base/i18nBundle","./Popup","./Icon","sap/ui/webc/common/thirdparty/icons/resize-corner","sap/ui/webc/common/thirdparty/icons/error","sap/ui/webc/common/thirdparty/icons/alert","sap/ui/webc/common/thirdparty/icons/sys-enter-2","sap/ui/webc/common/thirdparty/icons/information","./generated/i18n/i18n-defaults","./generated/templates/DialogTemplate.lit","./generated/themes/BrowserScrollbar.css","./generated/themes/PopupsCommon.css","./generated/themes/Dialog.css","./types/PopupAccessibleRole"],function(e,t,i,s,r,n,a,o,d,h,l,u,c,p,_,g,f,b,m,w,v,R){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;i=y(i);s=y(s);r=y(r);n=y(n);o=y(o);h=y(h);l=y(l);b=y(b);m=y(m);w=y(w);v=y(v);R=y(R);function y(e){return e&&e.__esModule?e:{default:e}}var H=void 0&&(void 0).__decorate||function(e,t,i,s){var r=arguments.length,n=r<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,i):s,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")n=Reflect.decorate(e,t,i,s);else for(var o=e.length-1;o>=0;o--)if(a=e[o])n=(r<3?a(n):r>3?a(t,i,n):a(t,i))||n;return r>3&&n&&Object.defineProperty(t,i,n),n};var D;const M=16;const z={[o.default.Error]:"error",[o.default.Warning]:"alert",[o.default.Success]:"sys-enter-2",[o.default.Information]:"information"};let E=D=class e extends h.default{constructor(){super();this._draggedOrResized=false;this._revertSize=()=>{Object.assign(this.style,{top:"",left:"",width:"",height:""})};this._screenResizeHandler=this._screenResize.bind(this);this._dragMouseMoveHandler=this._onDragMouseMove.bind(this);this._dragMouseUpHandler=this._onDragMouseUp.bind(this);this._resizeMouseMoveHandler=this._onResizeMouseMove.bind(this);this._resizeMouseUpHandler=this._onResizeMouseUp.bind(this);this._dragStartHandler=this._handleDragStart.bind(this)}static async onDefine(){D.i18nBundle=await(0,d.getI18nBundle)("@ui5/webcomponents")}static _isHeader(e){return e.classList.contains("ui5-popup-header-root")||e.getAttribute("slot")==="header"}async show(e=false){await super._open(e)}get isModal(){return true}get shouldHideBackdrop(){return false}get _ariaLabelledBy(){let e;if(this.headerText!==""&&!this._ariaLabel){e="ui5-popup-header-text"}return e}get ariaRoleDescriptionHeaderText(){return this.resizable||this.draggable?D.i18nBundle.getText(f.DIALOG_HEADER_ARIA_ROLE_DESCRIPTION):undefined}get effectiveAriaDescribedBy(){return this.resizable||this.draggable?`${this._id}-descr`:undefined}get ariaDescribedByHeaderTextResizable(){return D.i18nBundle.getText(f.DIALOG_HEADER_ARIA_DESCRIBEDBY_RESIZABLE)}get ariaDescribedByHeaderTextDraggable(){return D.i18nBundle.getText(f.DIALOG_HEADER_ARIA_DESCRIBEDBY_DRAGGABLE)}get ariaDescribedByHeaderTextDraggableAndResizable(){return D.i18nBundle.getText(f.DIALOG_HEADER_ARIA_DESCRIBEDBY_DRAGGABLE_RESIZABLE)}get _displayProp(){return"flex"}get _displayHeader(){return this.header.length||this.headerText||this.draggable||this.resizable}get _movable(){return!this.stretch&&this.onDesktop&&(this.draggable||this.resizable)}get _headerTabIndex(){return this._movable?"0":undefined}get _showResizeHandle(){return this.resizable&&this.onDesktop}get _minHeight(){let e=Number.parseInt(window.getComputedStyle(this.contentDOM).minHeight);const t=this._root.querySelector(".ui5-popup-header-root");if(t){e+=t.offsetHeight}const i=this._root.querySelector(".ui5-popup-footer-root");if(i){e+=i.offsetHeight}return e}get hasValueState(){return this.state!==o.default.None}get _dialogStateIcon(){return z[this.state]}get _role(){if(this.accessibleRole===R.default.None){return undefined}if(this.state===o.default.Error||this.state===o.default.Warning){return R.default.AlertDialog.toLowerCase()}return this.accessibleRole.toLowerCase()}_show(){super._show();this._center()}onBeforeRendering(){super.onBeforeRendering();this._isRTL=this.effectiveDir==="rtl";this.onPhone=(0,t.isPhone)();this.onDesktop=(0,t.isDesktop)()}onAfterRendering(){if(!this.isOpen()&&this.open){this.show()}else if(this.isOpen()&&!this.open){this.close()}}onEnterDOM(){super.onEnterDOM();this._attachScreenResizeHandler();this.addEventListener("dragstart",this._dragStartHandler)}onExitDOM(){super.onExitDOM();this._detachScreenResizeHandler();this.removeEventListener("dragstart",this._dragStartHandler)}_resize(){super._resize();if(!this._draggedOrResized){this._center()}}_screenResize(){this._center()}_attachScreenResizeHandler(){if(!this._screenResizeHandlerAttached){window.addEventListener("resize",this._screenResizeHandler);this._screenResizeHandlerAttached=true}}_detachScreenResizeHandler(){if(this._screenResizeHandlerAttached){window.removeEventListener("resize",this._screenResizeHandler);this._screenResizeHandlerAttached=false}}_center(){const e=window.innerHeight-this.offsetHeight,t=window.innerWidth-this.offsetWidth;Object.assign(this.style,{top:`${Math.round(e/2)}px`,left:`${Math.round(t/2)}px`})}_onDragMouseDown(e){if(!this._movable||!this.draggable||!D._isHeader(e.target)){return}e.preventDefault();const{top:t,left:i}=this.getBoundingClientRect();const{width:s,height:r}=window.getComputedStyle(this);Object.assign(this.style,{top:`${t}px`,left:`${i}px`,width:`${Math.round(Number.parseFloat(s)*100)/100}px`,height:`${Math.round(Number.parseFloat(r)*100)/100}px`});this._x=e.clientX;this._y=e.clientY;this._draggedOrResized=true;this._attachMouseDragHandlers()}_onDragMouseMove(e){e.preventDefault();const{clientX:t,clientY:i}=e;const s=this._x-t;const r=this._y-i;const{left:n,top:a}=this.getBoundingClientRect();Object.assign(this.style,{left:`${Math.floor(n-s)}px`,top:`${Math.floor(a-r)}px`});this._x=t;this._y=i}_onDragMouseUp(){delete this._x;delete this._y;this._detachMouseDragHandlers()}_onDragOrResizeKeyDown(e){if(!this._movable||!D._isHeader(e.target)){return}if(this.draggable&&[a.isUp,a.isDown,a.isLeft,a.isRight].some(t=>t(e))){this._dragWithEvent(e);return}if(this.resizable&&[a.isUpShift,a.isDownShift,a.isLeftShift,a.isRightShift].some(t=>t(e))){this._resizeWithEvent(e)}}_dragWithEvent(e){const{top:t,left:i,width:s,height:r}=this.getBoundingClientRect();let o=0;let d="top";switch(true){case(0,a.isUp)(e):o=t-M;d="top";break;case(0,a.isDown)(e):o=t+M;d="top";break;case(0,a.isLeft)(e):o=i-M;d="left";break;case(0,a.isRight)(e):o=i+M;d="left";break}o=(0,n.default)(o,0,d==="left"?window.innerWidth-s:window.innerHeight-r);this.style[d]=`${o}px`}_resizeWithEvent(e){this._draggedOrResized=true;this.addEventListener("ui5-before-close",this._revertSize,{once:true});const{top:t,left:i}=this.getBoundingClientRect(),s=window.getComputedStyle(this),r=Number.parseFloat(s.minWidth),o=window.innerWidth-i,d=window.innerHeight-t;let h=Number.parseFloat(s.width),l=Number.parseFloat(s.height);switch(true){case(0,a.isUpShift)(e):l-=M;break;case(0,a.isDownShift)(e):l+=M;break;case(0,a.isLeftShift)(e):h-=M;break;case(0,a.isRightShift)(e):h+=M;break}h=(0,n.default)(h,r,o);l=(0,n.default)(l,this._minHeight,d);Object.assign(this.style,{width:`${h}px`,height:`${l}px`})}_attachMouseDragHandlers(){window.addEventListener("mousemove",this._dragMouseMoveHandler);window.addEventListener("mouseup",this._dragMouseUpHandler)}_detachMouseDragHandlers(){window.removeEventListener("mousemove",this._dragMouseMoveHandler);window.removeEventListener("mouseup",this._dragMouseUpHandler)}_onResizeMouseDown(e){if(!this._movable||!this.resizable){return}e.preventDefault();const{top:t,left:i}=this.getBoundingClientRect();const{width:s,height:r,minWidth:n}=window.getComputedStyle(this);this._initialX=e.clientX;this._initialY=e.clientY;this._initialWidth=Number.parseFloat(s);this._initialHeight=Number.parseFloat(r);this._initialTop=t;this._initialLeft=i;this._minWidth=Number.parseFloat(n);this._cachedMinHeight=this._minHeight;Object.assign(this.style,{top:`${t}px`,left:`${i}px`});this._draggedOrResized=true;this._attachMouseResizeHandlers()}_onResizeMouseMove(e){const{clientX:t,clientY:i}=e;let s,r;if(this._isRTL){s=(0,n.default)(this._initialWidth-(t-this._initialX),this._minWidth,this._initialLeft+this._initialWidth);r=(0,n.default)(this._initialLeft+(t-this._initialX),0,this._initialX+this._initialWidth-this._minWidth)}else{s=(0,n.default)(this._initialWidth+(t-this._initialX),this._minWidth,window.innerWidth-this._initialLeft)}const a=(0,n.default)(this._initialHeight+(i-this._initialY),this._cachedMinHeight,window.innerHeight-this._initialTop);Object.assign(this.style,{height:`${a}px`,width:`${s}px`,left:r?`${r}px`:undefined})}_onResizeMouseUp(){delete this._initialX;delete this._initialY;delete this._initialWidth;delete this._initialHeight;delete this._initialTop;delete this._initialLeft;delete this._minWidth;delete this._cachedMinHeight;this._detachMouseResizeHandlers()}_handleDragStart(e){if(this.draggable){e.preventDefault()}}_attachMouseResizeHandlers(){window.addEventListener("mousemove",this._resizeMouseMoveHandler);window.addEventListener("mouseup",this._resizeMouseUpHandler);this.addEventListener("ui5-before-close",this._revertSize,{once:true})}_detachMouseResizeHandlers(){window.removeEventListener("mousemove",this._resizeMouseMoveHandler);window.removeEventListener("mouseup",this._resizeMouseUpHandler)}};H([(0,r.default)()],E.prototype,"headerText",void 0);H([(0,r.default)({type:Boolean})],E.prototype,"stretch",void 0);H([(0,r.default)({type:Boolean})],E.prototype,"draggable",void 0);H([(0,r.default)({type:Boolean})],E.prototype,"resizable",void 0);H([(0,r.default)({type:o.default,defaultValue:o.default.None})],E.prototype,"state",void 0);H([(0,r.default)({type:Boolean})],E.prototype,"onPhone",void 0);H([(0,r.default)({type:Boolean})],E.prototype,"onDesktop",void 0);H([(0,s.default)()],E.prototype,"header",void 0);H([(0,s.default)()],E.prototype,"footer",void 0);E=D=H([(0,i.default)({tag:"ui5-dialog",template:b.default,styles:[m.default,w.default,v.default],dependencies:[l.default]})],E);E.define();var L=E;e.default=L});
//# sourceMappingURL=Dialog.js.map