sap.ui.define(["exports","sap/ui/webc/common/thirdparty/base/decorators/property","sap/ui/webc/common/thirdparty/base/decorators/slot","sap/ui/webc/common/thirdparty/base/decorators/event","sap/ui/webc/common/thirdparty/base/decorators/customElement","sap/ui/webc/common/thirdparty/base/renderer/LitRenderer","sap/ui/webc/common/thirdparty/base/Keys","sap/ui/webc/common/thirdparty/base/CustomElementsScope","./generated/i18n/i18n-defaults","./Input","./generated/templates/MultiInputTemplate.lit","./generated/themes/MultiInput.css","./Token","./Tokenizer","./Icon","sap/ui/webc/common/thirdparty/icons/value-help"],function(e,t,o,n,s,r,i,a,u,l,c,p,f,d,h,k){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;t=y(t);o=y(o);n=y(n);s=y(s);r=y(r);l=y(l);c=y(c);p=y(p);f=y(f);d=v(d);h=y(h);function g(e){if(typeof WeakMap!=="function")return null;var t=new WeakMap;var o=new WeakMap;return(g=function(e){return e?o:t})(e)}function v(e,t){if(!t&&e&&e.__esModule){return e}if(e===null||typeof e!=="object"&&typeof e!=="function"){return{default:e}}var o=g(t);if(o&&o.has(e)){return o.get(e)}var n={};var s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e){if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)){var i=s?Object.getOwnPropertyDescriptor(e,r):null;if(i&&(i.get||i.set)){Object.defineProperty(n,r,i)}else{n[r]=e[r]}}}n.default=e;if(o){o.set(e,n)}return n}function y(e){return e&&e.__esModule?e:{default:e}}var _=void 0&&(void 0).__decorate||function(e,t,o,n){var s=arguments.length,r=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,o):n,i;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)if(i=e[a])r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r;return s>3&&r&&Object.defineProperty(t,o,r),r};var m;let T=m=class e extends l.default{constructor(){super();this._skipOpenSuggestions=false;this._valueHelpIconPressed=false}valueHelpPress(){this.closePopover();this.fireEvent("value-help-trigger")}showMorePress(){this.expandedTokenizer=false;this.focus()}tokenDelete(e){const t=e.detail.ref;const o=this.tokens.filter(e=>e.selected);const n=this.tokens.length-1===0||this.tokens.length===o.length;if(this._readonly){return}if(t){this.fireEvent("token-delete",{token:t});if(n){this.focus()}return}if(o.indexOf(t)===-1){o.push(t)}o.forEach(e=>{this.fireEvent("token-delete",{token:e})})}valueHelpMouseDown(e){const t=e.target;this.closePopover();this.tokenizer.closeMorePopover();this._valueHelpIconPressed=true;t.focus()}_tokenizerFocusOut(e){const t=e.relatedTarget===this.tokenizer.staticAreaItem;if(!this.contains(e.relatedTarget)&&!t){this.tokenizer._tokens.forEach(e=>{e.selected=false});this.tokenizer.scrollToStart()}if(e.relatedTarget===this.nativeInput){this.tokenizer.closeMorePopover()}}valueHelpMouseUp(){setTimeout(()=>{this._valueHelpIconPressed=false},0)}innerFocusIn(){this.expandedTokenizer=true;this.focused=true;this.tokenizer.scrollToEnd();this.tokenizer._getTokens().forEach(e=>{e.selected=false})}_onkeydown(e){super._onkeydown(e);const t=e.target;const o=(0,i.isHome)(e)&&t.selectionStart===0;const n=e.metaKey||e.ctrlKey;const s=this.tokens;if(o){this._skipOpenSuggestions=true;return this._focusFirstToken(e)}if((0,i.isLeft)(e)||(0,i.isBackSpace)(e)){this._skipOpenSuggestions=true;return this._handleLeft(e)}this._skipOpenSuggestions=false;if((0,i.isShow)(e)){this.valueHelpPress()}if(n&&e.key.toLowerCase()==="i"&&s.length>0){e.preventDefault();this.tokenizer.openMorePopover()}}_onTokenizerKeydown(e){const t=(0,i.isRightCtrl)(e);const o=!!(e.metaKey||e.ctrlKey);const n=this.tokens;if((0,i.isRight)(e)||(0,i.isEnd)(e)||t){e.preventDefault();const o=this.tokens.length-1;if(e.target===this.tokens[o]&&this.tokens[o]===document.activeElement){setTimeout(()=>{this.focus()},0)}else if(t){e.preventDefault();return this.tokenizer._handleArrowCtrl(e,e.target,this.tokens,true)}}if(o&&["c","x"].includes(e.key.toLowerCase())){e.preventDefault();const t=e.key.toLowerCase()==="x";const o=n.filter(e=>e.selected);if(t){const e=this.tokenizer._fillClipboard(d.ClipboardDataOperation.cut,o);o.forEach(e=>{this.fireEvent("token-delete",{token:e})});this.focus();return e}return this.tokenizer._fillClipboard(d.ClipboardDataOperation.copy,o)}if(o&&e.key.toLowerCase()==="i"&&n.length>0){e.preventDefault();this.tokenizer.openMorePopover()}}_handleLeft(e){const t=this.getDomRef().querySelector(`input`).selectionStart;const o=this.tokens;const n=o.length&&o[o.length-1];if(t===0&&n){e.preventDefault();n.focus();this.tokenizer._itemNav.setCurrentItem(n)}}_focusFirstToken(e){const t=this.tokens;const o=t.length&&t[0];if(o){e.preventDefault();o.focus();this.tokenizer._itemNav.setCurrentItem(o)}}_onfocusout(e){super._onfocusout(e);const t=e.relatedTarget;const o=this.contains(t);const n=this.shadowRoot.contains(t);if(!o&&!n){this.expandedTokenizer=false;this.tokenizer._itemNav._currentIndex=-1}}async _onfocusin(e){const t=await this.getInputDOMRef();if(e.target===t){await super._onfocusin(e)}}lastItemDeleted(){setTimeout(()=>{this.focus()},0)}onBeforeRendering(){super.onBeforeRendering();this.style.setProperty((0,a.getScopedVarName)("--_ui5-input-icons-count"),`${this.iconsCount}`);this.tokenizerAvailable=this.tokens&&this.tokens.length>0}get iconsCount(){return super.iconsCount+(this.showValueHelpIcon?1:0)}get tokenizer(){return this.shadowRoot.querySelector("[ui5-tokenizer]")}get _tokensCountText(){if(!this.tokenizer){return}return this.tokenizer._tokensCountText()}get _tokensCountTextId(){return`${this._id}-hiddenText-nMore`}get _placeholder(){if(this.tokenizer&&this.tokenizer._tokens.length){return""}return this.placeholder}get accInfo(){const e=`${this._tokensCountTextId} ${this.suggestionsTextId} ${this.valueStateTextId}`.trim();return{input:{...super.accInfo.input,ariaRoledescription:this.ariaRoleDescription,ariaDescribedBy:e}}}get ariaRoleDescription(){return m.i18nBundle.getText(u.MULTIINPUT_ROLEDESCRIPTION_TEXT)}get morePopoverOpener(){if(this.tokens.length===1&&this.tokens[0].isTruncatable){return this.tokens[0]}return this}};_([(0,t.default)({type:Boolean})],T.prototype,"showValueHelpIcon",void 0);_([(0,t.default)({type:Boolean})],T.prototype,"expandedTokenizer",void 0);_([(0,t.default)({type:Boolean})],T.prototype,"tokenizerAvailable",void 0);_([(0,o.default)()],T.prototype,"tokens",void 0);T=m=_([(0,s.default)({tag:"ui5-multi-input",renderer:r.default,template:c.default,styles:[l.default.styles,p.default],dependencies:[...l.default.dependencies,d.default,f.default,h.default]}),(0,n.default)("value-help-trigger"),(0,n.default)("token-delete",{detail:{token:{type:HTMLElement}}})],T);T.define();var b=T;e.default=b});
//# sourceMappingURL=MultiInput.js.map