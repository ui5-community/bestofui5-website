sap.ui.define(["exports","sap/ui/webc/common/thirdparty/base/decorators/customElement","sap/ui/webc/common/thirdparty/base/decorators/property","sap/ui/webc/common/thirdparty/base/renderer/LitRenderer","sap/ui/webc/common/thirdparty/localization/features/calendar/Gregorian","sap/ui/webc/common/thirdparty/base/Keys","./TimePickerInternals","./TimePickerClock","./ToggleSpinButton","./SegmentedButton","./generated/templates/TimeSelectionClocksTemplate.lit","./generated/themes/TimeSelectionClocks.css"],function(e,t,s,i,n,o,a,h,r,c,l,u){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;t=_(t);s=_(s);i=_(i);a=_(a);h=_(h);r=_(r);c=_(c);l=_(l);u=_(u);function _(e){return e&&e.__esModule?e:{default:e}}var d=void 0&&(void 0).__decorate||function(e,t,s,i){var n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,s):i,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,s,i);else for(var h=e.length-1;h>=0;h--)if(a=e[h])o=(n<3?a(o):n>3?a(t,s,o):a(t,s))||o;return n>3&&o&&Object.defineProperty(t,s,o),o};let p=class e extends a.default{onBeforeRendering(){this._createComponents()}_buttonComponent(e){const t=typeof e==="string"?this._indexFromName(e):e;const s=this._entities[t].entity;return s?this.shadowRoot?.querySelector(`#${this._id}_button_${s}`):undefined}_clockComponent(e){const t=typeof e==="string"?this._indexFromName(e):e;const s=this._entities[t].entity;return s?this.shadowRoot?.querySelector(`#${this._id}_clock_${s}`):undefined}_clocksFocusIn(e){const t=e.target;if(t.id===this._id){this._switchClock(this._activeIndex)}}_buttonFocusIn(e){const t=e.target;const s=this._getNameFromId(t.id);if(s){this._switchTo(s)}}_onkeyup(e){if((0,o.isSpace)(e)){this._spacePressed=false}}_onkeydown(e){let t;const s=e.target&&e.target.tagName.toLowerCase().indexOf("segmented")===-1;if((0,o.isEnter)(e)){this.fireEvent("close-picker")}else if((0,o.isSpace)(e)&&s&&!this._spacePressed){e.preventDefault();this._spacePressed=true;this._keyboardBuffer="";this._resetCooldown(true);this._switchNextClock(true)}else if(((0,o.isUp)(e)||(0,o.isDown)(e))&&!(0,o.isUpAlt)(e)&&!(0,o.isDownAlt)(e)){t=this._clockComponent(this._activeIndex);t&&!t.disabled&&t._modifyValue((0,o.isUp)(e));e.preventDefault()}else if((0,o.isPageUp)(e)||(0,o.isPageDown)(e)){t=this._clockComponent("hours");if(t&&!t.disabled){this._switchTo("hours");t._modifyValue((0,o.isPageUp)(e))}e.preventDefault()}else if((0,o.isPageUpShift)(e)||(0,o.isPageDownShift)(e)){t=this._clockComponent("minutes");if(t&&!t.disabled){this._switchTo("minutes");t._modifyValue((0,o.isPageUpShift)(e))}e.preventDefault()}else if((0,o.isPageUpShiftCtrl)(e)||(0,o.isPageDownShiftCtrl)(e)){t=this._clockComponent("seconds");if(t&&!t.disabled){this._switchTo("seconds");t._modifyValue((0,o.isPageUpShiftCtrl)(e))}e.preventDefault()}else if((0,o.isKeyA)(e)||(0,o.isKeyP)(e)){const t=this._buttonAmPm();if(t){t.items[0].pressed=(0,o.isKeyA)(e);t.items[1].pressed=(0,o.isKeyP)(e);const s=(0,o.isKeyA)(e)?t.items[0].textContent:t.items[1].textContent;s&&this._calculatePeriodChange(s)}e.preventDefault()}else if((0,o.isColon)(e)){this._keyboardBuffer="";this._exactMatch=undefined;this._resetCooldown(true);this._switchNextClock(true)}else if((0,o.isNumber)(e)&&this._entities[this._activeIndex]){this._exactMatch=undefined;this._resetCooldown(true);this._numbersInput(e)}}_numbersInput(e){const t=e.key;const s=this._keyboardBuffer+t;const i=parseInt(s);const n=this._entities[this._activeIndex];let o=this._clockComponent(this._activeIndex);if(!n||!n.attributes){return}if(i>n.attributes.max){o&&o._setSelectedValue(parseInt(this._keyboardBuffer));this._switchNextClock();this._keyboardBuffer=t;o=this._clockComponent(this._activeIndex);o&&o._setSelectedValue(parseInt(t));this._resetCooldown(true)}else{this._keyboardBuffer=s;o&&o._setSelectedValue(parseInt(this._keyboardBuffer));if(this._keyboardBuffer.length===2||parseInt(`${this._keyboardBuffer}0`)>n.attributes.max){this._resetCooldown(this._keyboardBuffer.length!==2);this._keyboardBuffer="";this._switchNextClock()}}}_focusFirstButton(){this._activeIndex=0;this._buttonComponent(0).focus()}_setExactMatch(){const e=this._clockComponent(this._activeIndex);e&&this._exactMatch!==undefined&&e._setSelectedValue(this._exactMatch)}_createComponents(){const e={hours:parseInt(this._hours),minutes:parseInt(this._minutes),seconds:parseInt(this._seconds)};this._entities=[];this._periods=[];this._componentMap={hours:-1,minutes:-1,seconds:-1};if(this._hasHoursComponent){this._componentMap.hours=this._entities.length;this._entities.push({label:this.hoursLabel,entity:"hours",itemMin:1,itemMax:12,value:e.hours,stringValue:this._hours,textValue:`${e.hours} ${this.hoursLabel}`,displayStep:1,lastItemReplacement:this._hoursConfiguration.isTwelveHoursFormat?-1:0,showInnerCircle:!this._hoursConfiguration.isTwelveHoursFormat,prependZero:this._zeroPaddedHours,hasSeparator:this._entities.length>0,active:false,attributes:{min:this._hoursConfiguration.minHour,max:this._hoursConfiguration.maxHour,step:1}})}if(this._hasMinutesComponent){this._componentMap.minutes=this._entities.length;this._entities.push({label:this.minutesLabel,entity:"minutes",itemMin:1,itemMax:60,value:e.minutes,stringValue:this._minutes,textValue:`${e.minutes} ${this.minutesLabel}`,displayStep:5,lastItemReplacement:0,showInnerCircle:false,prependZero:false,hasSeparator:this._entities.length>0,active:false,attributes:{min:0,max:59,step:1}})}if(this._hasSecondsComponent){this._componentMap.seconds=this._entities.length;this._entities.push({label:this.secondsLabel,entity:"seconds",itemMin:1,itemMax:60,value:e.seconds,stringValue:this._seconds,textValue:`${e.seconds} ${this.secondsLabel}`,displayStep:5,lastItemReplacement:0,showInnerCircle:false,prependZero:false,hasSeparator:this._entities.length>0,active:false,attributes:{min:0,max:59,step:1}})}this._entities[this._activeIndex].active=true;this._createPeriodComponent()}_switchTo(e){const t=this._componentKey(e);if(this._componentMap[t]!==undefined){this._switchClock(this._componentMap[t])}}_switchClock(e){const t=this._buttonComponent(e);if(this._entities.length&&e<this._entities.length&&t){this._entities[this._activeIndex].active=false;this._activeIndex=e;this._entities[this._activeIndex].active=true;t.focus()}}_switchNextClock(e=false){let t=this._activeIndex;const s=t;const i=this._clockComponent(t);do{t++;if(t>=this._entities.length){t=e?0:this._entities.length-1}}while(i&&i.disabled&&t!==s&&(e||t<this._entities.length-1));const n=this._clockComponent(t);if(t!==s&&n&&!n.disabled){this._switchClock(t)}}_clockChange(e){const t=this._getIndexFromId(e.target.id);const s=e.detail.stringValue;const i=e.detail.value;const n=this._buttonComponent(t);if(!n){return}this._entities[t].stringValue=s;this._entities[t].value=i;this._entities=JSON.parse(JSON.stringify(this._entities));switch(t){case this._componentMap.hours:this._hoursChange(i);break;case this._componentMap.minutes:this._minutesChange(i);break;case this._componentMap.seconds:this._secondsChange(i);break}if(e.detail.finalChange){if(this._activeIndex<this._entities.length-1){this._switchNextClock()}else{n.focus()}}}};d([(0,s.default)({type:Boolean,noAttribute:true})],p.prototype,"_spacePressed",void 0);p=d([(0,t.default)({tag:"ui5-time-selection-clocks",renderer:i.default,styles:u.default,template:l.default,dependencies:[h.default,r.default,c.default]})],p);p.define();var f=p;e.default=f});
//# sourceMappingURL=TimeSelectionClocks.js.map