sap.ui.define(["exports","sap/ui/webc/common/thirdparty/base/UI5Element","sap/ui/webc/common/thirdparty/base/decorators/customElement","sap/ui/webc/common/thirdparty/base/decorators/property","sap/ui/webc/common/thirdparty/base/decorators/event","sap/ui/webc/common/thirdparty/base/decorators/slot","sap/ui/webc/common/thirdparty/base/types/ValueState","sap/ui/webc/common/thirdparty/base/FeaturesRegistry","sap/ui/webc/common/thirdparty/base/renderer/LitRenderer","sap/ui/webc/common/thirdparty/base/i18nBundle","sap/ui/webc/common/thirdparty/base/MarkedEvents","sap/ui/webc/common/thirdparty/base/Keys","./generated/i18n/i18n-defaults","./Input","./Popover","./Icon","./generated/templates/FileUploaderTemplate.lit","./generated/templates/FileUploaderPopoverTemplate.lit","./generated/themes/FileUploader.css","./generated/themes/ResponsivePopoverCommon.css","./generated/themes/ValueStateMessage.css"],function(e,t,a,s,o,r,i,u,n,l,p,d,c,f,h,m,v,g,y,S,_){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;t=b(t);a=b(a);s=b(s);o=b(o);r=b(r);i=b(i);n=b(n);f=b(f);h=b(h);m=b(m);v=b(v);g=b(g);y=b(y);S=b(S);_=b(_);function b(e){return e&&e.__esModule?e:{default:e}}var I=void 0&&(void 0).__decorate||function(e,t,a,s){var o=arguments.length,r=o<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,a):s,i;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(e,t,a,s);else for(var u=e.length-1;u>=0;u--)if(i=e[u])r=(o<3?i(r):o>3?i(t,a,r):i(t,a))||r;return o>3&&r&&Object.defineProperty(t,a,r),r};var T;let w=T=class e extends t.default{static get formAssociated(){return true}constructor(){super();this._internals=this.attachInternals&&this.attachInternals()}_onmouseover(){this.content.forEach(e=>{e.classList.add("ui5_hovered")})}_onmouseout(){this.content.forEach(e=>{e.classList.remove("ui5_hovered")})}_onclick(e){if((0,p.getEventMark)(e)==="button"){this._input.click()}}_onkeydown(e){if((0,d.isEnter)(e)){this._input.click();e.preventDefault()}}_onkeyup(e){if((0,d.isSpace)(e)){this._input.click();e.preventDefault()}}_onfocusin(){this.focused=true}_onfocusout(){this.focused=false}get files(){if(this._input){return this._input.files}return T._emptyFilesList}onBeforeRendering(){this._enableFormSupport()}onAfterRendering(){if(!this.value){this._input.value=""}this.toggleValueStatePopover(this.shouldOpenValueStateMessagePopover)}_enableFormSupport(){const e=(0,u.getFeature)("FormSupport");if(e){if(this._canUseNativeFormSupport){this._setFormValue()}else{e.syncNativeFileInput(this,(e,t)=>{t.disabled=!!e.disabled},this._onChange.bind(this))}}else if(this.name){console.warn(`In order for the "name" property to have effect, you should also: import "@ui5/webcomponents/dist/features/InputElementsFormSupport.js";`)}}_onChange(e){const t=e.target.files;this._updateValue(t);this.fireEvent("change",{files:t})}_updateValue(e){this.value=Array.from(e||[]).reduce((e,t)=>`${e}"${t.name}" `,"")}_setFormValue(){const e=new FormData;if(this.files){for(let t=0;t<this.files.length;t++){e.append(this.name,this.files[t])}}this._internals.setFormValue(e)}toggleValueStatePopover(e){if(e){this.openValueStatePopover()}else{this.closeValueStatePopover()}}async openValueStatePopover(){const e=await this._getPopover();if(e){e.showAt(this)}}async closeValueStatePopover(){const e=await this._getPopover();if(e){e.close()}}async _getPopover(){const e=await this.getStaticAreaItemDomRef();return e.querySelector(".ui5-valuestatemessage-popover")}static get _emptyFilesList(){if(!this.emptyInput){this.emptyInput=document.createElement("input");this.emptyInput.type="file"}return this.emptyInput.files}get browseText(){return T.i18nBundle.getText(c.FILEUPLOAD_BROWSE)}get titleText(){return T.i18nBundle.getText(c.FILEUPLOADER_TITLE)}get _canUseNativeFormSupport(){return!!(this._internals&&this._internals.setFormValue)}get _keepInputInShadowDOM(){return this._canUseNativeFormSupport||!this.name}get _input(){return this.shadowRoot.querySelector("input[type=file]")||this.querySelector("input[type=file][data-ui5-form-support]")}get valueStateTextMappings(){return{Success:T.i18nBundle.getText(c.VALUE_STATE_SUCCESS),Information:T.i18nBundle.getText(c.VALUE_STATE_INFORMATION),Error:T.i18nBundle.getText(c.VALUE_STATE_ERROR),Warning:T.i18nBundle.getText(c.VALUE_STATE_WARNING)}}get valueStateText(){return this.valueStateTextMappings[this.valueState]}get hasValueState(){return this.valueState!==i.default.None}get hasValueStateText(){return this.hasValueState&&this.valueState!==i.default.Success}get valueStateMessageText(){return this.getSlottedNodes("valueStateMessage").map(e=>e.cloneNode(true))}get shouldDisplayDefaultValueStateMessage(){return!this.valueStateMessage.length&&this.hasValueStateText}get shouldOpenValueStateMessagePopover(){return this.focused&&this.hasValueStateText&&!this.hideInput}get _valueStateMessageInputIcon(){const e={Error:"error",Warning:"alert",Success:"sys-enter-2",Information:"information"};return this.valueState!==i.default.None?e[this.valueState]:""}get classes(){return{popoverValueState:{"ui5-valuestatemessage-root":true,"ui5-valuestatemessage--success":this.valueState===i.default.Success,"ui5-valuestatemessage--error":this.valueState===i.default.Error,"ui5-valuestatemessage--warning":this.valueState===i.default.Warning,"ui5-valuestatemessage--information":this.valueState===i.default.Information}}}get styles(){return{popoverHeader:{width:`${this.ui5Input?this.ui5Input.offsetWidth:0}px`}}}get ui5Input(){return this.shadowRoot.querySelector(".ui5-file-uploader-input")}static async onDefine(){T.i18nBundle=await(0,l.getI18nBundle)("@ui5/webcomponents")}};I([(0,s.default)()],w.prototype,"accept",void 0);I([(0,s.default)({type:Boolean})],w.prototype,"hideInput",void 0);I([(0,s.default)({type:Boolean})],w.prototype,"disabled",void 0);I([(0,s.default)({type:Boolean})],w.prototype,"multiple",void 0);I([(0,s.default)()],w.prototype,"name",void 0);I([(0,s.default)()],w.prototype,"placeholder",void 0);I([(0,s.default)()],w.prototype,"value",void 0);I([(0,s.default)({type:i.default,defaultValue:i.default.None})],w.prototype,"valueState",void 0);I([(0,s.default)({type:Boolean})],w.prototype,"focused",void 0);I([(0,r.default)({type:HTMLElement,default:true})],w.prototype,"content",void 0);I([(0,r.default)()],w.prototype,"valueStateMessage",void 0);I([(0,r.default)()],w.prototype,"formSupport",void 0);w=T=I([(0,a.default)({tag:"ui5-file-uploader",languageAware:true,renderer:n.default,styles:y.default,template:v.default,staticAreaTemplate:g.default,staticAreaStyles:[S.default,_.default],dependencies:[f.default,h.default,m.default]}),(0,o.default)("change",{detail:{files:{type:FileList}}})],w);w.define();var E=w;e.default=E});
//# sourceMappingURL=FileUploader.js.map