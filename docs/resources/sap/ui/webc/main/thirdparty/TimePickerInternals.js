sap.ui.define(["exports","sap/ui/webc/common/thirdparty/base/UI5Element","sap/ui/webc/common/thirdparty/base/decorators/customElement","sap/ui/webc/common/thirdparty/base/decorators/property","sap/ui/webc/common/thirdparty/base/decorators/event","sap/ui/webc/common/thirdparty/base/i18nBundle","sap/ui/webc/common/thirdparty/base/locale/getLocale","sap/ui/webc/common/thirdparty/localization/DateFormat","sap/ui/webc/common/thirdparty/localization/getCachedLocaleDataInstance","sap/ui/webc/common/thirdparty/localization/features/calendar/Gregorian","sap/ui/webc/common/thirdparty/base/types/CalendarType","sap/ui/webc/common/thirdparty/base/asset-registries/LocaleData","sap/ui/webc/common/thirdparty/base/types/Integer","./timepicker-utils/TimeSlider","./generated/i18n/i18n-defaults"],function(t,e,r,o,a,i,n,s,u,d,l,h,c,p,f){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;e=m(e);r=m(r);o=m(o);a=m(a);n=m(n);s=m(s);u=m(u);l=m(l);c=m(c);function m(t){return t&&t.__esModule?t:{default:t}}var g=void 0&&(void 0).__decorate||function(t,e,r,o){var a=arguments.length,i=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,r):o,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(t,e,r,o);else for(var s=t.length-1;s>=0;s--)if(n=t[s])i=(a<3?n(i):a>3?n(e,r,i):n(e,r))||i;return a>3&&i&&Object.defineProperty(e,r,i),i};var _;const y=1e3;let C=_=class t extends e.default{static async onDefine(){[_.i18nBundle]=await Promise.all([(0,i.getI18nBundle)("@ui5/webcomponents"),(0,h.fetchCldr)((0,n.default)().getLanguage(),(0,n.default)().getRegion(),(0,n.default)().getScript())])}get _hoursConfiguration(){const t=this.getFormat().aFormatArray;const e=t.find(t=>t.type.startsWith("hour"));return(0,p.getHoursConfigByFormat)(e?e.type:"hour0_23")}get _zeroPaddedHours(){const t=this.getFormat().aFormatArray;const e=t.find(t=>t.type.startsWith("hour"));return!(e.digits&&e.digits===1)}get _neededComponents(){const t=this.getFormat().aFormatArray;return(0,p.getTimeControlsByFormat)(t,this._hoursConfiguration)}get _hasHoursComponent(){return this._neededComponents[0]}get _hasMinutesComponent(){return this._neededComponents[1]}get _hasSecondsComponent(){return this._neededComponents[2]}get _hasPeriodsComponent(){return this._neededComponents[3]}get dateValue(){return this.value?this.getFormat().parse(this.value,undefined,undefined):new Date}get validDateValue(){return this.value!==undefined&&this.isValid(this.value)?this.dateValue:new Date}get periodsArray(){const t=this.getFormat().aDayPeriodsAbbrev;return t.map(t=>t.toUpperCase())}get _hours(){let t;const e=this.validDateValue;if(this._hoursConfiguration.isTwelveHoursFormat&&e.getHours()>this._hoursConfiguration.maxHour){t=e.getHours()-12}else if(this._hoursConfiguration.isTwelveHoursFormat&&e.getHours()<this._hoursConfiguration.minHour){t=e.getHours()+12}else{t=e.getHours()}if(t.toString().length===1&&this._zeroPaddedHours){t=`0${t}`}return t.toString()}get _minutes(){const t=this.validDateValue.getMinutes().toString();return t.length===1?`0${t}`:t}get _seconds(){const t=this.validDateValue.getSeconds().toString();return t.length===1?`0${t}`:t}get _period(){let t;const e=this.validDateValue;if(!this._hoursConfiguration.isTwelveHoursFormat){return undefined}if(this._hoursConfiguration.minHour===1){t=e.getHours()>=this._hoursConfiguration.maxHour?this.periodsArray[1]:this.periodsArray[0]}else{t=e.getHours()>this._hoursConfiguration.maxHour||e.getHours()===this._hoursConfiguration.minHour?this.periodsArray[1]:this.periodsArray[0]}return t}get _formatPattern(){const t=this.formatPattern;const e=!!t.match(/H/i);const r=!t||!e;const o=(0,u.default)((0,n.default)());return r?o.getCombinedDateTimePattern("medium","medium",undefined):t}get _isPattern(){return this._formatPattern!=="medium"&&this._formatPattern!=="short"&&this._formatPattern!=="long"}get hoursLabel(){return _.i18nBundle.getText(f.TIMEPICKER_HOURS_LABEL)}get minutesLabel(){return _.i18nBundle.getText(f.TIMEPICKER_MINUTES_LABEL)}get secondsLabel(){return _.i18nBundle.getText(f.TIMEPICKER_SECONDS_LABEL)}get clockDialAriaLabel(){return _.i18nBundle.getText(f.TIMEPICKER_CLOCK_DIAL_LABEL)}setValue(t){const e=this.formatValue(t);if(this.isValid(e)){this.value=this.normalizeValue(e);this.fireEvent("change",{value:this.value,valid:true})}}isValid(t){return t===""||this.getFormat().parse(t,undefined,undefined)}normalizeValue(t){if(t===""){return t}return this.getFormat().format(this.getFormat().parse(t,undefined,undefined))}getFormat(){let t;if(this._isPattern){t=s.default.getDateInstance({calendarType:this._calendarType,pattern:this._formatPattern})}else{t=s.default.getDateInstance({calendarType:this._calendarType,style:this._formatPattern})}return t}formatValue(t){return this.getFormat().format(t)}_componentKey(t){return t}_indexFromName(t){return this._componentMap[this._componentKey(t)]}_getNameFromId(t){const e=t.split("_");return e.length?e[e.length-1]:undefined}_getIndexFromId(t){const e=this._getNameFromId(t);return e?this._indexFromName(e):0}_hoursChange(t){if(this._hoursConfiguration.isTwelveHoursFormat){t=this._shiftHours(t)}const e=this.validDateValue;e.setHours(t);this.setValue(e)}_minutesChange(t){const e=this.validDateValue;e.setMinutes(t);this.setValue(e)}_secondsChange(t){const e=this.validDateValue;e.setSeconds(t);this.setValue(e)}_buttonAmPm(){return this._hasPeriodsComponent?this.shadowRoot?.querySelector(`#${this._id}_AmPm`):undefined}_createPeriodComponent(){if(this._hasPeriodsComponent){this.periodsArray.forEach(t=>{this._periods.push({label:t,pressed:this._period===t})})}}_periodChange(t){const e=t.target;if(e){const t=e.textContent;this._calculatePeriodChange(t)}}_calculatePeriodChange(t){const e=this.validDateValue;if(t===this._periods[0].label&&e.getHours()>=12){e.setHours(e.getHours()-12)}if(t===this._periods[1].label&&e.getHours()<12){e.setHours(e.getHours()+12)}this.setValue(e)}_shiftHours(t){if(this._period===this.periodsArray[0]){t=t===12?0:t}else if(this._period===this.periodsArray[1]){t=t===12?t:t+12}return t}_resetCooldown(t){if(!y){return}if(this._typeCooldownId){clearTimeout(this._typeCooldownId)}if(t){this._startCooldown()}}_startCooldown(){if(!y){return}this._typeCooldownId=setTimeout(()=>{this._keyboardBuffer="";this._typeCooldownId=undefined;if(this._exactMatch){this._setExactMatch();this._exactMatch=undefined}},y)}_setExactMatch(){}};g([(0,o.default)({defaultValue:undefined})],C.prototype,"value",void 0);g([(0,o.default)()],C.prototype,"formatPattern",void 0);g([(0,o.default)({validator:c.default,defaultValue:0,noAttribute:true})],C.prototype,"_activeIndex",void 0);g([(0,o.default)({type:l.default})],C.prototype,"_calendarType",void 0);g([(0,o.default)({type:Object,multiple:true})],C.prototype,"_entities",void 0);g([(0,o.default)({type:Object})],C.prototype,"_componentMap",void 0);g([(0,o.default)({type:Object,multiple:true})],C.prototype,"_periods",void 0);g([(0,o.default)({validator:c.default,noAttribute:true})],C.prototype,"_typeCooldownId",void 0);g([(0,o.default)({validator:c.default,noAttribute:true})],C.prototype,"_exactMatch",void 0);g([(0,o.default)({defaultValue:"",noAttribute:true})],C.prototype,"_keyboardBuffer",void 0);C=_=g([(0,r.default)({tag:"ui5-time-picker-internals"}),(0,a.default)("change",{detail:{value:{type:String},valid:{type:Boolean}}})],C);C.define();var v=C;t.default=v});
//# sourceMappingURL=TimePickerInternals.js.map