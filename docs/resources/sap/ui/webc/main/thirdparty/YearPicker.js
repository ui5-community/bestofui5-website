sap.ui.define(["exports","sap/ui/webc/common/thirdparty/base/decorators/customElement","sap/ui/webc/common/thirdparty/base/decorators/property","sap/ui/webc/common/thirdparty/base/decorators/event","sap/ui/webc/common/thirdparty/localization/DateFormat","sap/ui/webc/common/thirdparty/base/Keys","sap/ui/webc/common/thirdparty/base/types/Integer","sap/ui/webc/common/thirdparty/base/locale/getLocale","sap/ui/webc/common/thirdparty/localization/dates/transformDateToSecondaryType","sap/ui/webc/common/thirdparty/localization/dates/CalendarDate","sap/ui/webc/common/thirdparty/localization/dates/ExtremeDates","sap/ui/webc/common/thirdparty/base/i18nBundle","./CalendarPart","./generated/i18n/i18n-defaults","./generated/templates/YearPickerTemplate.lit","./generated/themes/YearPicker.css"],function(e,t,a,s,i,r,o,n,l,m,c,d,f,p,h,y){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;t=_(t);a=_(a);s=_(s);i=_(i);o=_(o);n=_(n);l=_(l);m=_(m);f=_(f);h=_(h);y=_(y);function _(e){return e&&e.__esModule?e:{default:e}}var u=void 0&&(void 0).__decorate||function(e,t,a,s){var i=arguments.length,r=i<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,a):s,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(e,t,a,s);else for(var n=e.length-1;n>=0;n--)if(o=e[n])r=(i<3?o(r):i>3?o(t,a,r):o(t,a))||r;return i>3&&r&&Object.defineProperty(t,a,r),r};var g;let Y=g=class e extends f.default{static async onDefine(){g.i18nBundle=await(0,d.getI18nBundle)("@ui5/webcomponents")}get roleDescription(){return g.i18nBundle.getText(p.YEAR_PICKER_DESCRIPTION)}onBeforeRendering(){this._buildYears()}_getPageSize(){return this.secondaryCalendarType?8:20}_getRowSize(){return this.secondaryCalendarType?2:4}_buildYears(){if(this._hidden){return}const e=this._getPageSize();const t=(0,n.default)();const a=i.default.getDateInstance({format:"y",calendarType:this._primaryCalendarType},t);const s=i.default.getDateInstance({format:"y",calendarType:this.secondaryCalendarType},t);this._calculateFirstYear();this._lastYear=this._firstYear+e-1;const r=this._calendarDate;const o=this._minDate;const c=this._maxDate;const d=new m.default(r,this._primaryCalendarType);let f;let p;d.setYear(this._firstYear);const h=[];let y;for(let t=0;t<e;t++){y=d.valueOf()/1e3;const e=this.selectedDates.some(e=>{const t=m.default.fromTimestamp(e*1e3,this._primaryCalendarType);return t.getYear()===d.getYear()});const i=d.getYear()===r.getYear();const n=d.getYear()<o.getYear()||d.getYear()>c.getYear();if(this.secondaryCalendarType){f=(0,l.default)(this._primaryCalendarType,this.secondaryCalendarType,y,true);p=f.firstDate.getYear()===f.lastDate.getYear()?`${s.format(f.firstDate.toLocalJSDate(),true)}`:`${s.format(f.firstDate.toLocalJSDate(),true)} - ${s.format(f.lastDate.toLocalJSDate(),true)}`}const _={timestamp:y.toString(),_tabIndex:i?"0":"-1",focusRef:i,selected:e,ariaSelected:e?"true":"false",year:a.format(d.toLocalJSDate()),yearInSecType:this.secondaryCalendarType&&p,disabled:n,classes:"ui5-yp-item"};if(e){_.classes+=" ui5-yp-item--selected"}if(n){_.classes+=" ui5-yp-item--disabled"}if(this.secondaryCalendarType){_.classes+=" ui5-yp-item-secondary-type"}const u=Math.floor(t/this._getRowSize());if(h[u]){h[u].push(_)}else{h[u]=[_]}d.setYear(d.getYear()+1)}this._years=h}_calculateFirstYear(){const e=this._getPageSize();const t=(0,c.getMaxCalendarDate)(this._primaryCalendarType).getYear();const a=this._calendarDate.getYear();if(!this._firstYear){this._firstYear=a-e/2}if(a<this._firstYear){this._firstYear-=e}else if(a>=this._firstYear+e){this._firstYear+=e}if(Math.abs(this._firstYear-a)>=e){this._firstYear=a-e/2}this._firstYear=Math.max(this._firstYear,this._minDate.getYear());this._firstYear=Math.min(this._firstYear,this._maxDate.getYear());if(this._firstYear>t-e+1){this._firstYear=t-e+1}}onAfterRendering(){if(!this._hidden){this.focus()}}_onkeydown(e){let t=true;const a=this._getPageSize();const s=this._getRowSize();if((0,r.isEnter)(e)){this._selectYear(e)}else if((0,r.isSpace)(e)){e.preventDefault()}else if((0,r.isLeft)(e)){this._modifyTimestampBy(-1)}else if((0,r.isRight)(e)){this._modifyTimestampBy(1)}else if((0,r.isUp)(e)){this._modifyTimestampBy(-s)}else if((0,r.isDown)(e)){this._modifyTimestampBy(s)}else if((0,r.isPageUp)(e)){this._modifyTimestampBy(-a)}else if((0,r.isPageDown)(e)){this._modifyTimestampBy(a)}else if((0,r.isHome)(e)||(0,r.isEnd)(e)){this._onHomeOrEnd((0,r.isHome)(e))}else if((0,r.isHomeCtrl)(e)){this._setTimestamp(parseInt(this._years[0][0].timestamp))}else if((0,r.isEndCtrl)(e)){this._setTimestamp(parseInt(this._years[a/s-1][s-1].timestamp))}else{t=false}if(t){e.preventDefault()}}_onHomeOrEnd(e){this._years.forEach(t=>{const a=t.findIndex(e=>m.default.fromTimestamp(parseInt(e.timestamp)*1e3).getYear()===this._calendarDate.getYear());if(a!==-1){const a=e?0:this._getRowSize()-1;this._setTimestamp(parseInt(t[a].timestamp))}})}_setTimestamp(e){this._safelySetTimestamp(e);this.fireEvent("navigate",{timestamp:this.timestamp})}_modifyTimestampBy(e){this._safelyModifyTimestampBy(e,"year");this.fireEvent("navigate",{timestamp:this.timestamp})}_onkeyup(e){if((0,r.isSpace)(e)){this._selectYear(e)}}_selectYear(e){e.preventDefault();const t=e.target;if(t.className.indexOf("ui5-yp-item")>-1){const e=this._getTimestampFromDom(t);this._safelySetTimestamp(e);this.fireEvent("change",{timestamp:this.timestamp})}}_hasPreviousPage(){return this._firstYear>this._minDate.getYear()}_hasNextPage(){return this._firstYear+this._getPageSize()-1<this._maxDate.getYear()}_showPreviousPage(){const e=this._getPageSize();this._modifyTimestampBy(-e)}_showNextPage(){this._modifyTimestampBy(this._getPageSize())}};u([(0,a.default)({validator:o.default,multiple:true,compareValues:true})],Y.prototype,"selectedDates",void 0);u([(0,a.default)({type:Object,multiple:true})],Y.prototype,"_years",void 0);u([(0,a.default)({type:Boolean,noAttribute:true})],Y.prototype,"_hidden",void 0);Y=g=u([(0,t.default)({tag:"ui5-yearpicker",styles:y.default,template:h.default}),(0,s.default)("change"),(0,s.default)("navigate")],Y);Y.define();var T=Y;e.default=T});
//# sourceMappingURL=YearPicker.js.map