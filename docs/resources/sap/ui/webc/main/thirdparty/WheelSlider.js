sap.ui.define(["exports","sap/ui/webc/common/thirdparty/base/UI5Element","sap/ui/webc/common/thirdparty/base/decorators/customElement","sap/ui/webc/common/thirdparty/base/decorators/property","sap/ui/webc/common/thirdparty/base/decorators/event","sap/ui/webc/common/thirdparty/base/renderer/LitRenderer","sap/ui/webc/common/thirdparty/base/Device","sap/ui/webc/common/thirdparty/base/CustomElementsScope","sap/ui/webc/common/thirdparty/base/Keys","sap/ui/webc/common/thirdparty/base/util/getEffectiveContentDensity","sap/ui/webc/common/thirdparty/icons/navigation-up-arrow","sap/ui/webc/common/thirdparty/icons/navigation-down-arrow","sap/ui/webc/common/thirdparty/base/delegate/ScrollEnablement","./generated/templates/WheelSliderTemplate.lit","./Button","./generated/themes/WheelSlider.css"],function(e,t,i,s,l,n,r,o,h,a,c,d,u,m,p,_){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;t=f(t);i=f(i);s=f(s);l=f(l);n=f(n);a=f(a);u=f(u);m=f(m);p=f(p);_=f(_);function f(e){return e&&e.__esModule?e:{default:e}}var y=void 0&&(void 0).__decorate||function(e,t,i,s){var l=arguments.length,n=l<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,i):s,r;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")n=Reflect.decorate(e,t,i,s);else for(var o=e.length-1;o>=0;o--)if(r=e[o])n=(l<3?r(n):l>3?r(t,i,n):r(t,i))||n;return l>3&&n&&Object.defineProperty(t,i,n),n};const v=32;const w=46;let g=class e extends t.default{constructor(){super();this._currentElementIndex=0;this._itemsToShow=[];this._scroller=new u.default(this);this._scroller.attachEvent("scroll",this._updateScrolling.bind(this));this._scroller.attachEvent("mouseup",this._handleScrollTouchEnd.bind(this));this._scroller.attachEvent("touchend",this._handleScrollTouchEnd.bind(this))}onBeforeRendering(){if(!this.expanded&&this.cyclic){const e=this._currentElementIndex%this._items.length;this._currentElementIndex=this._timesMultipliedOnCyclic()/2*this._items.length+e}if(!this.value){this.value=this._items[0]}this._buildItemsToShow()}onAfterRendering(){if(!this._scroller.scrollContainer){this._scroller.scrollContainer=this.shadowRoot.querySelector(`#${this._id}--wrapper`)}if(!this.expanded){this._scroller.scrollTo(0,0)}if(this.expanded){const e=this.shadowRoot.querySelectorAll(".ui5-wheelslider-item");for(let t=0;t<e.length;t++){const i=e[t];if(i.textContent===this.value){this._selectElementByIndex(Number(i.dataset.itemIndex)+this._getCurrentRepetition()*this._items.length);return true}}this._selectElement(e[0])}}get classes(){return{root:{"ui5-wheelslider-root":true,"ui5-phone":(0,r.isPhone)()}}}expandSlider(){this.expanded=true;this.fireEvent("expand",{})}collapseSlider(){this.expanded=false;this.fireEvent("collapse",{})}get _itemCellHeight(){const e=(0,a.default)(document.body)==="compact"?v:w;if(this.shadowRoot.querySelectorAll(".ui5-wheelslider-item").length){const t=getComputedStyle(this.shadowRoot.querySelector(".ui5-wheelslider-item"));const i=t.getPropertyValue((0,o.getScopedVarName)("--_ui5_wheelslider_item_height"));const s=i.replace("px","");return Number(s)||e}return e}_updateScrolling(){const e=this._itemCellHeight,t=this._scroller.scrollContainer.scrollTop;let i;if(!t){return}i=Math.round(t/e);if(this.value===this._itemsToShow[i].value){return}if(this.cyclic){const e=this._handleArrayBorderReached(i);if(i!==e){i=e}}this.value=this._itemsToShow[i].value;this._currentElementIndex=i}_handleScrollTouchEnd(){if(this.expanded){this._selectElementByIndex(this._currentElementIndex)}}_selectElement(e){if(e&&e.textContent&&this._items.indexOf(e.textContent)>-1){this._currentElementIndex=Number(e.dataset.itemIndex);this._selectElementByIndex(this._currentElementIndex)}}_getCurrentRepetition(){if(this._currentElementIndex){return Math.floor(this._currentElementIndex/this._items.length)}return 0}_selectElementByIndex(e){let t=e;const i=this._itemsToShow.length;const s=this._itemCellHeight;const l=s*t;if(this.cyclic){t=this._handleArrayBorderReached(t)}if(t<i&&t>-1){this._scroller.scrollTo(0,l,5,100);this._currentElementIndex=t;this.value=this._items[t-this._getCurrentRepetition()*this._items.length];this.fireEvent("select",{value:this.value})}}_timesMultipliedOnCyclic(){const e=70;const t=Math.round(e/this._items.length);const i=3;return Math.max(i,t)}_buildItemsToShow(){let e=this._items;if(this.cyclic){if(e.length<this._items.length*this._timesMultipliedOnCyclic()){for(let t=0;t<this._timesMultipliedOnCyclic();t++){e=e.concat(this._items)}}}this._itemsToShow=e.map(e=>({value:e,selected:e===this.value}))}_handleArrayBorderReached(e){const t=this._itemsToShow.length;const i=7;let s=e;if(i>s){s+=this._items.length*2}else if(s>t-i){s-=this._items.length*2}return s}_handleWheel(e){if(!e){return}e.stopPropagation();e.preventDefault();if(e.timeStamp===this._prevWheelTimestamp||!this.expanded){return}if(this._prevWheelTimestamp&&(e.timeStamp<this._prevWheelTimestamp+250||!this.expanded)){return}if(e.deltaY>0){this._itemUp()}else if(e.deltaY<0){this._itemDown()}this._prevWheelTimestamp=e.timeStamp}_onclick(e){const t=e.target;if(!t.classList.contains("ui5-wheelslider-item")){return}if(this.expanded){this.value=t.textContent||"";this._selectElement(t);this.fireEvent("select",{value:this.value})}else{this.expanded=true}}_onArrowDown(e){e.preventDefault();this._itemDown()}_onArrowUp(e){e.preventDefault();this._itemUp()}_itemDown(){const e=this._currentElementIndex+1;this._selectElementByIndex(e)}_itemUp(){const e=this._currentElementIndex-1;this._selectElementByIndex(e)}_onkeydown(e){if(!this.expanded){return}if((0,h.isUp)(e)){this._onArrowUp(e)}if((0,h.isDown)(e)){this._onArrowDown(e)}if((0,h.isPageDown)(e)){this._selectLimitCell(e,false)}if((0,h.isPageUp)(e)){this._selectLimitCell(e,true)}}_selectLimitCell(e,t){e.preventDefault();const i=this.cyclic?this._items.length:0;if(t){this._selectElementByIndex(this._items.length-1+i)}else{this._selectElementByIndex(i)}}};y([(0,s.default)({type:Boolean})],g.prototype,"disabled",void 0);y([(0,s.default)({defaultValue:"0"})],g.prototype,"value",void 0);y([(0,s.default)({defaultValue:""})],g.prototype,"label",void 0);y([(0,s.default)({type:Boolean})],g.prototype,"expanded",void 0);y([(0,s.default)({type:Boolean})],g.prototype,"cyclic",void 0);y([(0,s.default)({multiple:true,compareValues:true})],g.prototype,"_items",void 0);y([(0,s.default)({type:Object,multiple:true})],g.prototype,"_itemsToShow",void 0);g=y([(0,i.default)({tag:"ui5-wheelslider",renderer:n.default,styles:_.default,template:m.default,dependencies:[p.default]}),(0,l.default)("select",{detail:{value:{type:String}}}),(0,l.default)("expand"),(0,l.default)("collapse")],g);g.define();var x=g;e.default=x});
//# sourceMappingURL=WheelSlider.js.map