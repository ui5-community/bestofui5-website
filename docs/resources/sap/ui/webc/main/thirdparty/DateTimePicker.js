sap.ui.define(["exports","sap/ui/webc/common/thirdparty/base/decorators/property","sap/ui/webc/common/thirdparty/base/decorators/customElement","sap/ui/webc/common/thirdparty/base/delegate/ResizeHandler","sap/ui/webc/common/thirdparty/base/locale/getLocale","sap/ui/webc/common/thirdparty/localization/getCachedLocaleDataInstance","sap/ui/webc/common/thirdparty/localization/dates/modifyDateBy","sap/ui/webc/common/thirdparty/localization/dates/CalendarDate","sap/ui/webc/common/thirdparty/icons/date-time","./Button","./ToggleButton","./SegmentedButton","./Calendar","./DatePicker","./TimeSelection","./generated/i18n/i18n-defaults","./generated/templates/DateTimePickerPopoverTemplate.lit","./generated/themes/DateTimePicker.css","./generated/themes/DateTimePickerPopover.css","./types/CalendarPickersMode"],function(e,t,i,a,s,r,n,o,l,d,u,c,h,p,m,_,f,g,T,w){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;t=V(t);i=V(i);a=V(a);s=V(s);r=V(r);n=V(n);o=V(o);d=V(d);u=V(u);c=V(c);h=V(h);p=V(p);m=V(m);f=V(f);g=V(g);T=V(T);w=V(w);function V(e){return e&&e.__esModule?e:{default:e}}var v=void 0&&(void 0).__decorate||function(e,t,i,a){var s=arguments.length,r=s<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,i):a,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(e,t,i,a);else for(var o=e.length-1;o>=0;o--)if(n=e[o])r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r;return s>3&&r&&Object.defineProperty(t,i,r),r};var D;const y=640;let S=D=class e extends p.default{constructor(){super();this._handleResizeBound=this._handleResize.bind(this)}onResponsivePopoverAfterClose(){super.onResponsivePopoverAfterClose();this._showTimeView=false;this._previewValues={}}onEnterDOM(){a.default.register(document.body,this._handleResizeBound)}onExitDOM(){a.default.deregister(document.body,this._handleResizeBound)}async openPicker(){await super.openPicker();this._currentTimeSlider="hours";this._previewValues.timeSelectionValue=this.value||this.getFormat().format(new Date)}get classes(){return{picker:{"ui5-dt-picker-content--phone":this.phone},dateTimeView:{"ui5-dt-cal--hidden":this.phone&&this.showTimeView,"ui5-dt-time--hidden":this.phone&&this.showDateView},footer:{"ui5-dt-picker-footer-time-hidden":this.phone&&this.showTimeView||this.phone&&this.showDateView}}}get _formatPattern(){const e=!!this.formatPattern.match(/H/i);const t=!this.formatPattern||!e;const i=(0,r.default)((0,s.default)());return t?i.getCombinedDateTimePattern("medium","medium",this._primaryCalendarType):this.formatPattern}get _calendarTimestamp(){return this._previewValues.calendarTimestamp?this._previewValues.calendarTimestamp:super._calendarTimestamp}get _calendarSelectedDates(){return this._previewValues.calendarValue?[this._previewValues.calendarValue]:super._calendarSelectedDates}get _timeSelectionValue(){return this._previewValues.timeSelectionValue?this._previewValues.timeSelectionValue:this.value}get openIconName(){return"date-time"}get btnOKLabel(){return D.i18nBundle.getText(_.TIMEPICKER_SUBMIT_BUTTON)}get btnCancelLabel(){return D.i18nBundle.getText(_.TIMEPICKER_CANCEL_BUTTON)}get btnDateLabel(){return D.i18nBundle.getText(_.DATETIME_PICKER_DATE_BUTTON)}get btnTimeLabel(){return D.i18nBundle.getText(_.DATETIME_PICKER_TIME_BUTTON)}get showFooter(){return true}get showDateView(){return this.phone?!this._showTimeView:true}get showTimeView(){return this.phone?this._showTimeView:true}get phone(){return super.phone||this._phoneMode}get dateAriaDescription(){return D.i18nBundle.getText(_.DATETIME_DESCRIPTION)}get _shouldHideHeader(){return true}onSelectedDatesChange(e){e.preventDefault();const t=e.path?e.path[1]:e.composedPath()[1];this._previewValues={...this._previewValues,calendarTimestamp:e.detail.timestamp,calendarValue:e.detail.values[0],timeSelectionValue:t.lastChild.value}}onTimeSelectionChange(e){this._previewValues={...this._previewValues,timeSelectionValue:e.detail.value}}onTimeSliderChange(e){this._currentTimeSlider=e.detail.slider}_handleResize(){const e=document.body.offsetWidth;const t=e<=y;const i=t&&!this._phoneMode||!t&&this._phoneMode;if(i){this._phoneMode=t}}get _submitDisabled(){return!this._calendarSelectedDates||!this._calendarSelectedDates.length}_submitClick(){const e=this.getSelectedDateTime();const t=this.getFormat().format(e);if(this.value!==t){this._updateValueAndFireEvents(t,true,["change","value-changed"])}this.closePicker()}_cancelClick(){this.closePicker()}_dateTimeSwitchChange(e){const t=e.target;this._showTimeView=t.getAttribute("key")==="Time";if(this._showTimeView){this._currentTimeSlider="hours"}}_modifyDateValue(e,t,i){if(!this.dateValue){return}const a=(0,n.default)(o.default.fromLocalJSDate(this.dateValue),e,t,i,this._minDate,this._maxDate);const s=a.toLocalJSDate();s.setHours(this.dateValue.getHours());s.setMinutes(this.dateValue.getMinutes());s.setSeconds(this.dateValue.getSeconds());const r=this.formatValue(s);this._updateValueAndFireEvents(r,true,["change","value-changed"])}async getPicker(){const e=await this.getStaticAreaItemDomRef();return e.querySelector("[ui5-responsive-popover]")}getSelectedDateTime(){const e=this.getFormat().parse(this._calendarSelectedDates[0]);const t=this.getFormat().parse(this._timeSelectionValue);if(t){e.setHours(t.getHours());e.setMinutes(t.getMinutes());e.setSeconds(t.getSeconds())}return e}get _calendarPickersMode(){return w.default.DAY_MONTH_YEAR}};v([(0,t.default)({type:Boolean,noAttribute:true})],S.prototype,"_showTimeView",void 0);v([(0,t.default)({type:Boolean})],S.prototype,"_phoneMode",void 0);v([(0,t.default)({type:Object})],S.prototype,"_previewValues",void 0);v([(0,t.default)({defaultValue:"hours"})],S.prototype,"_currentTimeSlider",void 0);S=D=v([(0,i.default)({tag:"ui5-datetime-picker",staticAreaTemplate:f.default,styles:[D.styles,g.default],staticAreaStyles:[p.default.staticAreaStyles,T.default],dependencies:[...p.default.dependencies,h.default,d.default,u.default,c.default,m.default]})],S);S.define();var b=S;e.default=b});
//# sourceMappingURL=DateTimePicker.js.map