sap.ui.define(["exports","../FeaturesRegistry","../config/Theme","../util/PopupUtils"],function(e,t,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;class n{static isAtLeastVersion116(){const e=window.sap.ui.version;const t=e.split(".");if(!t||t.length<2){return false}return parseInt(t[0])>1||parseInt(t[1])>=116}static isOpenUI5Detected(){return typeof window.sap?.ui?.require==="function"}static init(){if(!n.isOpenUI5Detected()){return Promise.resolve()}return new Promise(e=>{window.sap.ui.require(["sap/ui/core/Core"],async t=>{const i=()=>{let t=["sap/ui/core/Popup","sap/ui/core/LocaleData"];if(n.isAtLeastVersion116()){t=[...t,"sap/base/i18n/Formatting","sap/base/i18n/Localization","sap/ui/core/ControlBehavior","sap/ui/core/Theming","sap/ui/core/date/CalendarUtils"]}window.sap.ui.require(t,t=>{t.setInitialZIndex((0,a.getCurrentZIndex)());e()})};if(n.isAtLeastVersion116()){await t.ready();i()}else{t.attachInit(i)}})})}static getConfigurationSettingsObject(){if(!n.isOpenUI5Detected()){return{}}if(n.isAtLeastVersion116()){const e=window.sap.ui.require("sap/ui/core/ControlBehavior");const t=window.sap.ui.require("sap/base/i18n/Localization");const i=window.sap.ui.require("sap/ui/core/Theming");const a=window.sap.ui.require("sap/base/i18n/Formatting");const n=window.sap.ui.require("sap/ui/core/date/CalendarUtils");return{animationMode:e.getAnimationMode(),language:t.getLanguage(),theme:i.getTheme(),themeRoot:i.getThemeRoot(),rtl:t.getRTL(),timezone:t.getTimezone(),calendarType:a.getCalendarType(),formatSettings:{firstDayOfWeek:n.getWeekConfigurationValues().firstDayOfWeek,legacyDateCalendarCustomizing:a.getCustomIslamicCalendarData?.()??a.getLegacyDateCalendarCustomizing?.()}}}const e=window.sap.ui.require("sap/ui/core/Core");const t=e.getConfiguration();const i=window.sap.ui.require("sap/ui/core/LocaleData");return{animationMode:t.getAnimationMode(),language:t.getLanguage(),theme:t.getTheme(),themeRoot:t.getThemeRoot(),rtl:t.getRTL(),timezone:t.getTimezone(),calendarType:t.getCalendarType(),formatSettings:{firstDayOfWeek:i?i.getInstance(t.getLocale()).getFirstDayOfWeek():undefined,legacyDateCalendarCustomizing:t.getFormatSettings().getLegacyDateCalendarCustomizing()}}}static getLocaleDataObject(){if(!n.isOpenUI5Detected()){return}const e=window.sap.ui.require("sap/ui/core/LocaleData");if(n.isAtLeastVersion116()){const t=window.sap.ui.require("sap/base/i18n/Localization");return e.getInstance(t.getLanguageTag())._get()}const t=window.sap.ui.require("sap/ui/core/Core");const i=t.getConfiguration();return e.getInstance(i.getLocale())._get()}static _listenForThemeChange(){if(n.isAtLeastVersion116()){const e=window.sap.ui.require("sap/ui/core/Theming");e.attachApplied(()=>{(0,i.setTheme)(e.getTheme())})}else{const e=window.sap.ui.require("sap/ui/core/Core");const t=e.getConfiguration();e.attachThemeChanged(()=>{(0,i.setTheme)(t.getTheme())})}}static attachListeners(){if(!n.isOpenUI5Detected()){return}n._listenForThemeChange()}static cssVariablesLoaded(){if(!n.isOpenUI5Detected()){return}const e=[...document.head.children].find(e=>e.id==="sap-ui-theme-sap.ui.core");if(!e){return false}return!!e.href.match(/\/css(-|_)variables\.css/)}static getNextZIndex(){if(!n.isOpenUI5Detected()){return}const e=window.sap.ui.require("sap/ui/core/Popup");if(!e){console.warn(`The OpenUI5Support feature hasn't been initialized properly. Make sure you import the "@ui5/webcomponents-base/dist/features/OpenUI5Support.js" module before all components' modules.`)}return e.getNextZIndex()}static setInitialZIndex(){if(!n.isOpenUI5Detected()){return}const e=window.sap.ui.require("sap/ui/core/Popup");e.setInitialZIndex((0,a.getCurrentZIndex)())}}(0,t.registerFeature)("OpenUI5Support",n);var s=n;e.default=s});
//# sourceMappingURL=OpenUI5Support.js.map