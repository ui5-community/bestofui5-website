sap.ui.define(["exports","../FeaturesRegistry","../Keys","../UI5Element","../util/FocusableElements","../util/getFastNavigationGroups","../util/isElementClickable"],function(e,t,s,i,n,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;o=u(o);r=u(r);function u(e){return e&&e.__esModule?e:{default:e}}class a{constructor(){this.selectedGroup=null;this.groups=[];this.keydownHandler=this._keydownHandler.bind(this);this.attachEventListeners()}attachEventListeners(){document.addEventListener("keydown",this.keydownHandler)}async groupElementToFocus(e){const t=(0,i.instanceOfUI5Element)(e)?e.getDomRef():e;if(t){if((0,r.default)(t)){return t}const e=await(0,n.getFirstFocusableElement)(t);if(e){return e}}}async findNextFocusableGroupElement(e){let t;for(let s=0;s<this.groups.length;s++){let s;if(e>-1){if(e+1>=this.groups.length){e=0;s=this.groups[e]}else{e+=1;s=this.groups[e]}}else{e=0;s=this.groups[e]}t=await this.groupElementToFocus(s);if(t){break}}return t}async findPreviousFocusableGroupElement(e){let t;for(let s=0;s<this.groups.length;s++){let s;if(e>0){const t=await this.groupElementToFocus(this.groups[e-1]);const i=t===await this.groupElementToFocus(this.groups[e]);e=i?e-2:e-1;if(e<0){e=this.groups.length-1}s=this.groups[e]}else{e=this.groups.length-1;s=this.groups[e]}t=await this.groupElementToFocus(s);if(t){break}}return t}async _keydownHandler(e){const t=(0,s.isF6Next)(e);const i=(0,s.isF6Previous)(e);if(!(t||i)){return}this.updateGroups();if(this.groups.length<1){return}e.preventDefault();let n;if(this.groups.length===0){n=await this.groupElementToFocus(this.groups[0]);return n?.focus()}let o=-1;if(this.selectedGroup){o=this.groups.indexOf(this.selectedGroup)}if(t){n=await this.findNextFocusableGroupElement(o)}if(i){n=await this.findPreviousFocusableGroupElement(o)}n?.focus()}removeEventListeners(){document.removeEventListener("keydown",this.keydownHandler)}updateGroups(){this.setSelectedGroup();this.groups=(0,o.default)(document.body)}setSelectedGroup(e=window.document){const t=window.document.querySelector("html");let s=this.deepActive(e);while(s&&s.getAttribute("data-sap-ui-fastnavgroup")!=="true"&&s!==t){s=s.parentElement?s.parentNode:s.parentNode.host}this.selectedGroup=s}deepActive(e){if(e.activeElement&&e.activeElement.shadowRoot){return this.deepActive(e.activeElement.shadowRoot)}return e.activeElement}destroy(){this.removeEventListeners()}static init(){if(!this._instance){this._instance=new a}return this._instance}}(0,t.registerFeature)("F6Navigation",a);var l=a;e.default=l});
//# sourceMappingURL=F6Navigation.js.map