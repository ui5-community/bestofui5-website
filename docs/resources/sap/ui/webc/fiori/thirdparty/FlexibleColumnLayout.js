sap.ui.define(["exports","sap/ui/webc/common/thirdparty/base/UI5Element","sap/ui/webc/common/thirdparty/base/decorators/customElement","sap/ui/webc/common/thirdparty/base/decorators/property","sap/ui/webc/common/thirdparty/base/decorators/slot","sap/ui/webc/common/thirdparty/base/decorators/event","sap/ui/webc/common/thirdparty/base/renderer/LitRenderer","sap/ui/webc/common/thirdparty/base/delegate/ResizeHandler","sap/ui/webc/common/thirdparty/base/types/Float","sap/ui/webc/common/thirdparty/base/types/Integer","sap/ui/webc/common/thirdparty/base/i18nBundle","sap/ui/webc/common/thirdparty/base/types/AnimationMode","sap/ui/webc/common/thirdparty/base/config/AnimationMode","sap/ui/webc/main/thirdparty/Button","sap/ui/webc/common/thirdparty/icons/slim-arrow-left","sap/ui/webc/common/thirdparty/icons/slim-arrow-right","./types/FCLLayout","./fcl-utils/FCLLayout","./generated/i18n/i18n-defaults","./generated/templates/FlexibleColumnLayoutTemplate.lit","./generated/themes/FlexibleColumnLayout.css"],function(t,e,i,r,o,n,s,a,l,u,d,c,h,m,f,y,p,C,g,b,w){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;e=L(e);i=L(i);r=L(r);o=L(o);n=L(n);s=L(s);a=L(a);l=L(l);u=L(u);c=L(c);m=L(m);p=L(p);b=L(b);w=L(w);function L(t){return t&&t.__esModule?t:{default:t}}var _=void 0&&(void 0).__decorate||function(t,e,i,r){var o=arguments.length,n=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,i):r,s;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")n=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)if(s=t[a])n=(o<3?s(n):o>3?s(e,i,n):s(e,i))||n;return o>3&&n&&Object.defineProperty(e,i,n),n};var A;var T;(function(t){t["PHONE"]="phone";t["TABLET"]="tablet";t["DESKTOP"]="desktop"})(T||(T={}));var v;(function(t){t[t["PHONE"]=599]="PHONE";t[t["TABLET"]=1023]="TABLET"})(v||(v={}));let O=A=class t extends e.default{constructor(){super();this.columnResizeHandler=t=>{t.target.classList.add("ui5-fcl-column--hidden")};this._prevLayout=null;this.initialRendering=true;this._handleResize=this.handleResize.bind(this)}static async onDefine(){A.i18nBundle=await(0,d.getI18nBundle)("@ui5/webcomponents-fiori")}static get ANIMATION_DURATION(){return(0,h.getAnimationMode)()!==c.default.None?560:0}onEnterDOM(){a.default.register(this,this._handleResize.bind(this))}onExitDOM(){a.default.deregister(this,this._handleResize)}onAfterRendering(){if(this.initialRendering){this.handleInitialRendering();return}this.syncLayout()}handleInitialRendering(){this._prevLayout=this.layout;this.updateLayout();this.initialRendering=false}handleResize(){if(this.initialRendering){return}const t=this.columnLayout.join();this.updateLayout();if(t!==this.columnLayout.join()){this.fireLayoutChange(false,true)}}startArrowClick(){this.arrowClick({start:true,end:false})}endArrowClick(){this.arrowClick({start:false,end:true})}arrowClick(t){this.layout=this.nextLayout(this.layout,{start:t.start,end:t.end});this.updateLayout();this.fireLayoutChange(true,false)}updateLayout(){this._width=this.widthDOM;this._columnLayout=this.nextColumnLayout(this.layout);this._visibleColumns=this.calcVisibleColumns(this._columnLayout);this.toggleColumns()}syncLayout(){if(this._prevLayout!==this.layout){this.updateLayout();this._prevLayout=this.layout}}toggleColumns(){this.toggleColumn("start");this.toggleColumn("mid");this.toggleColumn("end")}toggleColumn(t){let e;let i;if(t==="start"){e=this.startColumnWidth;i=this.startColumnDOM}else if(t==="mid"){e=this.midColumnWidth;i=this.midColumnDOM}else{e=this.endColumnWidth;i=this.endColumnDOM}const r=this._isColumnHidden(e);const o=this._isColumnHidden(i.style.width);if(r&&o){return}if(!r&&!o){i.style.width=typeof e==="number"?`${e}px`:e;return}if(r){i.style.width=typeof e==="number"?`${e}px`:e;i.addEventListener("transitionend",this.columnResizeHandler);return}if(o){i.removeEventListener("transitionend",this.columnResizeHandler);i.classList.remove("ui5-fcl-column--hidden");i.style.width=typeof e==="number"?`${e}px`:e}}nextLayout(t,e){if(!e){return}if(e.start){return(0,C.getNextLayoutByStartArrow)()[t]}if(e.end){return(0,C.getNextLayoutByEndArrow)()[t]}}nextColumnLayout(t){return this._effectiveLayoutsByMedia[this.media][t].layout}calcVisibleColumns(t){return t.filter(t=>!this._isColumnHidden(t)).length}fireLayoutChange(t,e){this.fireEvent("layout-change",{layout:this.layout,columnLayout:this._columnLayout,startColumnVisible:this.startColumnVisible,midColumnVisible:this.midColumnVisible,endColumnVisible:this.endColumnVisible,arrowUsed:t,arrowsUsed:t,resize:e})}_isColumnHidden(t){return t===0||t==="0px"}get columnLayout(){return this._columnLayout}get startColumnVisible(){if(this._columnLayout){return!this._isColumnHidden(this._columnLayout[0])}return false}get midColumnVisible(){if(this._columnLayout){return!this._isColumnHidden(this._columnLayout[1])}return false}get endColumnVisible(){if(this._columnLayout){return!this._isColumnHidden(this._columnLayout[2])}return false}get visibleColumns(){return this._visibleColumns}get classes(){const t=(0,h.getAnimationMode)()!==c.default.None;return{root:{"ui5-fcl-root":true},columns:{start:{"ui5-fcl-column":true,"ui5-fcl-column-animation":t,"ui5-fcl-column--start":true},middle:{"ui5-fcl-column":true,"ui5-fcl-column-animation":t,"ui5-fcl-column--middle":true},end:{"ui5-fcl-column":true,"ui5-fcl-column-animation":t,"ui5-fcl-column--end":true}}}}get styles(){return{arrowsContainer:{start:{display:this.showStartSeparator?"flex":"none"},end:{display:this.showEndSeparator?"flex":"none"}},arrows:{start:{display:this.showStartArrow?"inline-block":"none",transform:this.startArrowDirection==="mirror"?"rotate(180deg)":""},end:{display:this.showEndArrow?"inline-block":"none",transform:this.endArrowDirection==="mirror"?"rotate(180deg)":""}}}}get startColumnWidth(){return this._columnLayout?this._columnLayout[0]:"100%"}get midColumnWidth(){return this._columnLayout?this._columnLayout[1]:"0px"}get endColumnWidth(){return this._columnLayout?this._columnLayout[2]:"0px"}get showStartSeparator(){return this.effectiveArrowsInfo[0].separator||this.startArrowVisibility}get showEndSeparator(){return this.effectiveArrowsInfo[1].separator||this.endArrowVisibility}get showStartArrow(){return this.hideArrows?false:this.startArrowVisibility}get showEndArrow(){return this.hideArrows?false:this.endArrowVisibility}get startArrowVisibility(){return this.effectiveArrowsInfo[0].visible}get endArrowVisibility(){return this.effectiveArrowsInfo[1].visible}get startArrowDirection(){return this.effectiveArrowsInfo[0].dir}get endArrowDirection(){return this.effectiveArrowsInfo[1].dir}get effectiveArrowsInfo(){return this._effectiveLayoutsByMedia[this.media][this.layout].arrows}get media(){if(this._width<=v.PHONE){return T.PHONE}if(this._width<=v.TABLET){return T.TABLET}return T.DESKTOP}get widthDOM(){return this.getBoundingClientRect().width}get startColumnDOM(){return this.shadowRoot.querySelector(".ui5-fcl-column--start")}get midColumnDOM(){return this.shadowRoot.querySelector(".ui5-fcl-column--middle")}get endColumnDOM(){return this.shadowRoot.querySelector(".ui5-fcl-column--end")}get accStartColumnText(){return this.accessibilityTexts.startColumnAccessibleName||A.i18nBundle.getText(g.FCL_START_COLUMN_TXT)}get accMiddleColumnText(){return this.accessibilityTexts.midColumnAccessibleName||A.i18nBundle.getText(g.FCL_MIDDLE_COLUMN_TXT)}get accEndColumnText(){return this.accessibilityTexts.endColumnAccessibleName||A.i18nBundle.getText(g.FCL_END_COLUMN_TXT)}get accStartArrowContainerText(){return this.accessibilityTexts.startArrowContainerAccessibleName||undefined}get accEndArrowContainerText(){return this.accessibilityTexts.endArrowContainerAccessibleName||undefined}get accStartColumnRole(){if(this.startColumnVisible){return this.accessibilityRoles.startColumnRole||"region"}return undefined}get accMiddleColumnRole(){if(this.midColumnVisible){return this.accessibilityRoles.midColumnRole||"region"}return undefined}get accEndColumnRole(){if(this.endColumnVisible){return this.accessibilityRoles.endColumnRole||"region"}return undefined}get accStartArrowContainerRole(){return this.accessibilityRoles.startArrowContainerRole||undefined}get accEndArrowContainerRole(){return this.accessibilityRoles.endArrowContainerRole||undefined}get _effectiveLayoutsByMedia(){return this._layoutsConfiguration||(0,C.getLayoutsByMedia)()}get _accAttributes(){return{columns:{start:{role:this.accStartColumnRole,ariaHidden:!this.startColumnVisible||undefined},middle:{role:this.accMiddleColumnRole,ariaHidden:!this.midColumnVisible||undefined},end:{role:this.accEndColumnRole,ariaHidden:!this.endColumnVisible||undefined}}}}get accStartArrowText(){const t=this.accessibilityTexts;if(this.startArrowDirection==="mirror"){return t.startArrowLeftText||A.i18nBundle.getText(g.FCL_START_COLUMN_COLLAPSE_BUTTON_TOOLTIP)}return t.startArrowRightText||A.i18nBundle.getText(g.FCL_START_COLUMN_EXPAND_BUTTON_TOOLTIP)}get accEndArrowText(){const t=this.accessibilityTexts;if(this.endArrowDirection==="mirror"){return t.endArrowRightText||A.i18nBundle.getText(g.FCL_END_COLUMN_COLLAPSE_BUTTON_TOOLTIP)}return t.endArrowLeftText||A.i18nBundle.getText(g.FCL_END_COLUMN_EXPAND_BUTTON_TOOLTIP)}};_([(0,r.default)({type:p.default,defaultValue:p.default.OneColumn})],O.prototype,"layout",void 0);_([(0,r.default)({type:Boolean})],O.prototype,"hideArrows",void 0);_([(0,r.default)({type:Object})],O.prototype,"accessibilityTexts",void 0);_([(0,r.default)({type:Object})],O.prototype,"accessibilityRoles",void 0);_([(0,r.default)({validator:l.default,defaultValue:0})],O.prototype,"_width",void 0);_([(0,r.default)({type:Object,defaultValue:undefined})],O.prototype,"_columnLayout",void 0);_([(0,r.default)({validator:u.default,defaultValue:0})],O.prototype,"_visibleColumns",void 0);_([(0,r.default)({type:Object,defaultValue:undefined})],O.prototype,"_layoutsConfiguration",void 0);_([(0,o.default)()],O.prototype,"startColumn",void 0);_([(0,o.default)()],O.prototype,"midColumn",void 0);_([(0,o.default)()],O.prototype,"endColumn",void 0);O=A=_([(0,i.default)({tag:"ui5-flexible-column-layout",fastNavigation:true,renderer:s.default,styles:w.default,template:b.default,dependencies:[m.default]}),(0,n.default)("layout-change",{detail:{layout:{type:p.default},columnLayout:{type:Array},startColumnVisible:{type:Boolean},midColumnVisible:{type:Boolean},endColumnVisible:{type:Boolean},arrowsUsed:{type:Boolean},resize:{type:Boolean}}})],O);O.define();var R=O;t.default=R});
//# sourceMappingURL=FlexibleColumnLayout.js.map