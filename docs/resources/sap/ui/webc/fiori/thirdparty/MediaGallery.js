sap.ui.define(["exports","sap/ui/webc/common/thirdparty/base/delegate/ItemNavigation","sap/ui/webc/common/thirdparty/base/delegate/ResizeHandler","sap/ui/webc/common/thirdparty/base/Device","sap/ui/webc/common/thirdparty/base/MediaRange","sap/ui/webc/common/thirdparty/base/renderer/LitRenderer","sap/ui/webc/common/thirdparty/base/types/Integer","sap/ui/webc/common/thirdparty/base/types/NavigationMode","sap/ui/webc/common/thirdparty/base/UI5Element","sap/ui/webc/main/thirdparty/Button","sap/ui/webc/main/thirdparty/Carousel","sap/ui/webc/common/thirdparty/base/decorators/customElement","sap/ui/webc/common/thirdparty/base/decorators/property","sap/ui/webc/common/thirdparty/base/decorators/slot","sap/ui/webc/common/thirdparty/base/decorators/event","./MediaGalleryItem","./types/MediaGalleryItemLayout","./types/MediaGalleryLayout","./types/MediaGalleryMenuHorizontalAlign","./types/MediaGalleryMenuVerticalAlign","./generated/themes/MediaGallery.css","./generated/templates/MediaGalleryTemplate.lit"],function(e,t,i,a,l,s,o,r,n,u,d,h,f,c,m,p,y,_,g,v,b,I){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;t=w(t);i=w(i);l=w(l);s=w(s);o=w(o);r=w(r);n=w(n);u=w(u);d=w(d);h=w(h);f=w(f);c=w(c);m=w(m);p=w(p);y=w(y);_=w(_);g=w(g);v=w(v);b=w(b);I=w(I);function w(e){return e&&e.__esModule?e:{default:e}}var M=void 0&&(void 0).__decorate||function(e,t,i,a){var l=arguments.length,s=l<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,i):a,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)if(o=e[r])s=(l<3?o(s):l>3?o(t,i,s):o(t,i))||s;return l>3&&s&&Object.defineProperty(t,i,s),s};var S;const A={S:1,M:2,L:3,XL:4};let H=S=class e extends n.default{constructor(){super();this._onResize=this._updateLayout.bind(this);this._itemNavigation=new t.default(this,{navigationMode:r.default.Auto,getItemsCallback:()=>this._getFocusableItems()})}onEnterDOM(){!(0,a.isPhone)()&&i.default.register(this,this._onResize)}onExitDOM(){!(0,a.isPhone)()&&i.default.deregister(this,this._onResize)}onAfterRendering(){this._updateLayout();this._updateSelection()}_updateSelection(){let e=this.items.find(e=>e.selected);if(!e||!this._isSelectableItem(e)){e=this._findSelectableItem()}if(e&&e!==this._selectedItem){this._selectItem(e)}}_isSelectableItem(e){return!e.disabled&&!e.hidden}_findSelectableItem(){return this.items.find(this._isSelectableItem)}_updateMediaRange(e){this.mediaRange=l.default.getCurrentRange(l.default.RANGESETS.RANGE_4STEPS,e)}_updateLayout(){const e=this.getDomRef(),t=e.offsetHeight,i=e.offsetWidth;if(!i||!t||(0,a.isPhone)()){return}this._updateMediaRange(i);this.effectiveLayout=this._infereffectiveLayout();this._overflowSize=this._calculateOverflowSize(i,t);this._toggleDisplaySquareSize(this._shouldHaveSquareDisplay);this._toggleMainItem9x16size(this._shouldHaveWideDisplay)}_calculateOverflowSize(e,t){const i=S.THUMBNAIL_MARGIN;let a,l;if(this.showAllThumbnails){return 0}if(this.effectiveLayout===_.default.Horizontal){a=t-i;l=this.showAllThumbnails?A[this.mediaRange]:1}else{a=e-i*2;l=1}return this._getOverflowSize(a,l)}_toggleDisplaySquareSize(e){this._display.style.width="";if(e){const e=S.THUMBNAIL_MARGIN,t=this._display.offsetWidth;let i=this.getDomRef().offsetHeight-2*e;if(this.effectiveLayout===_.default.Vertical){i-=S.THUMBNAIL_HEIGHT+e}if(t>i){this._display.style.width=`${i}px`}}}_toggleMainItem9x16size(e){if(!this._mainItem){return}const t=this._mainItem.offsetWidth,i=e?`${t/16*9}px`:"";this._mainItem.contentHeight=i}_infereffectiveLayout(){if(this.layout===_.default.Auto){return this._isPhoneSize?_.default.Vertical:_.default.Horizontal}return this.layout}_getMaxAllowedThumbnailsInColumn(e){let t=Math.floor(e/S.THUMBNAIL_HEIGHT);if(!this.showAllThumbnails){t=Math.min(t,5)}return t}_getOverflowSize(e,t){const i=this._getMaxAllowedThumbnailsInColumn(e),a=Math.max(0,this.items.length-i*t);if(a===this.items.length||a===0){return a}return a+1}_getFocusableItems(){if(!this._showThumbnails){return[]}const e=this._visibleItems.filter(e=>!e.disabled);if(this._overflowBtn){e.push(this._overflowBtn)}return e}_selectItem(e,t=false){if(e===this._selectedItem){return}this._selectedItem=e;this._updateSelectedFlag(e);this._itemNavigation.setCurrentItem(e);if(t){this.fireEvent("selection-change",{item:e})}if((0,a.isPhone)()){this._selectItemOnPhone(e)}else{this._displayContent(e)}}_updateSelectedFlag(e){this.items.forEach(e=>{e.selected=false});e.selected=true}_selectItemOnPhone(e){const t=this._selectableItems.indexOf(e),i=this._carousel;i&&i.navigateTo(t)}_displayContent(e){let t;const i=this._mainItem,a=i._content,l=e._content;i._thumbnailDesign=false;a&&a.remove();if(l){t=l.cloneNode(true);i.layout=e.layout;i.appendChild(t)}}_onThumbnailClick(e){const t=e.target;const i=t.closest("[ui5-media-gallery-item]");if(i.disabled){return}if(i!==this._selectedItem){this._selectItem(i,true)}}_onOverflowBtnClick(){this.fireEvent("overflow-click")}_onDisplayAreaClick(){if(!this.interactiveDisplayArea){return}this.fireEvent("display-area-click")}_onCarouselNavigate(e){const t=e.detail.selectedIndex,i=this._selectableItems[t];this.fireEvent("selection-change",{item:i})}get _mainItemTabIndex(){return this.interactiveDisplayArea?0:undefined}get _selectableItems(){return this.items.filter(this._isSelectableItem)}get _carousel(){return this.shadowRoot.querySelector("[ui5-carousel]")}get _display(){return this.shadowRoot.querySelector(".ui5-media-gallery-display")}get _mainItem(){return this.shadowRoot.querySelector(".ui5-media-gallery-display [ui5-media-gallery-item]")}get _overflowBtn(){return this.shadowRoot.querySelector(".ui5-media-gallery-overflow [ui5-button]")}get _visibleItems(){const e=this.items.length-this._overflowSize;return this.items.slice(0,e)}get _isPhonePlatform(){return(0,a.isPhone)()}get _showThumbnails(){return!(0,a.isPhone)()}get _showOverflowBtn(){return this._overflowSize>0}get _isPhoneSize(){return this.mediaRange==="S"}get _mainItemHasWideLayout(){return this._mainItem&&this._mainItem.layout===y.default.Wide}get _shouldHaveWideDisplay(){return!!this._mainItemHasWideLayout&&this.showAllThumbnails&&this.effectiveLayout===_.default.Horizontal}get _shouldHaveSquareDisplay(){return!this._shouldHaveWideDisplay}static get THUMBNAIL_HEIGHT(){return 80}static get THUMBNAIL_MARGIN(){return 16}};M([(0,f.default)({type:Boolean})],H.prototype,"showAllThumbnails",void 0);M([(0,f.default)({type:Boolean})],H.prototype,"interactiveDisplayArea",void 0);M([(0,f.default)({type:_.default,defaultValue:_.default.Auto})],H.prototype,"layout",void 0);M([(0,f.default)({type:g.default,defaultValue:g.default.Left})],H.prototype,"menuHorizontalAlign",void 0);M([(0,f.default)({type:v.default,defaultValue:v.default.Bottom})],H.prototype,"menuVerticalAlign",void 0);M([(0,f.default)({type:_.default,defaultValue:_.default.Vertical})],H.prototype,"effectiveLayout",void 0);M([(0,f.default)()],H.prototype,"mediaRange",void 0);M([(0,f.default)({validator:o.default,noAttribute:true,defaultValue:0})],H.prototype,"_overflowSize",void 0);M([(0,c.default)({type:HTMLElement,individualSlots:true,invalidateOnChildChange:true,default:true})],H.prototype,"items",void 0);H=S=M([(0,h.default)({tag:"ui5-media-gallery",renderer:s.default,styles:[b.default],template:I.default,staticAreaTemplate:I.default,dependencies:[p.default,u.default,d.default]}),(0,m.default)("selection-change",{detail:{item:{type:HTMLElement}}}),(0,m.default)("overflow-click"),(0,m.default)("display-area-click")],H);H.define();var R=H;e.default=R});
//# sourceMappingURL=MediaGallery.js.map