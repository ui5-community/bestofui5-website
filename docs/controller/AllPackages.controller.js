"use strict";sap.ui.define(["./App.controller","sap/ui/model/Sorter","sap/base/Log"],function(e,t,s){function r(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const n=r(e);const i=n.extend("org.openui5.bestofui5.controller.AllPackages",{onInit:function e(){n.prototype.onInit.call(this);this.getRouter().getRoute("allPackages").attachEventOnce("patternMatched",this.onPatternMatchedOnce,this)},onPatternMatchedOnce:function e(t){this.getView().getModel("settings").setProperty("/headerKey","allPackages");this.getRouter().getRoute("allPackages").attachPatternMatched(this.onPatternMatched,this);try{const e=t.getParameter("arguments")["?query"]?t.getParameter("arguments")["?query"]:{};if(!(e&&Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype)){this.queryUtil.getParameterFromQuery(e);this.filterFromQuery(e)}}catch(e){s.error(this.getResourceBundle().getText("all_packages_controller_queryparsing"))}this.applySearchFilter();this.sortList(this.getView().getModel("settings").getProperty("/selectKey"),true)},onPatternMatched:function e(t){this.getView().getParent().getParent().getParent().scrollTo(this.getView().getModel("scrollState").getProperty("/packages"));this.getView().getModel("settings").setProperty("/headerKey","allPackages");this.applySearchFilter()},applySearchFilter:function e(){this.queryUtil.applySearchFilter();this.setSelectedItems()},setSelectedItems:function e(){const t=this.byId("multiComboBox");const s=this.getView().getModel("settings").getProperty("/tokens");let r=[];for(let e=0;e<s.length;e++){r.push(`${s[e].key};${s[e].type}`)}t.setSelectedKeys(r)},onPress:function e(t){const s=t.getSource().getBindingContext("data").getObject().name;this.navTo("RouteObjectView",{name:s},null,"object")},onSortSelectChange:function e(t){const s=t.getParameter("selectedItem").getKey();this.sortList(s);this.queryUtil.setQueryParameters()},sortList:function e(s){const r=this.getView().getModel("settings").getProperty("/sortOrderDecending");const n=this.getView().byId("listAllPackages").getBinding("items");const i=new t({path:s,descending:r});n.sort(i);this.getView().getModel("settings").setProperty("/selectKey",s)},filterFromQuery:function e(t){if("sort"in t){this.sortList(t.sort)}},onSelectionChange:function e(t){this.queryUtil.onSelectionChange(t);this.applySearchFilter()},changeSortOrder:function e(t){const s=this.getView().getModel("settings").getProperty("/sortOrderDecending");const r=this.getView().getModel("settings").getProperty("/selectKey");this.getView().getModel("settings").setProperty("/sortOrderDecending",!s);this.sortList(r);this.queryUtil.setQueryParameters()},onUpdateFinished:function e(t){const s=t.getParameter("total");this.getView().getModel("settings").setProperty("/allPackagesCount",s)}});return i});
//# sourceMappingURL=AllPackages.controller.js.map