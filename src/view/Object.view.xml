<mvc:View
  controllerName="org.openui5.bestofui5.controller.Object"
  xmlns:m="sap.m"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns:form="sap.ui.layout.form"
  xmlns:md="cc.md"
  xmlns="sap.uxap"
  xmlns:layout="sap.ui.layout"
  xmlns:tnt="sap.tnt"
  xmlns:cc="org.openui5.bestofui5.control"
  xmlns:core="sap.ui.core"
  displayBlock="true"
  height="100%"
>
  <ObjectPageLayout alwaysShowContentHeader="true" id="ObjectPageLayout" showAnchorBar="false" upperCaseAnchorBar="false" height="100%" class="fixImageWidth">
    <headerTitle>
      <ObjectPageHeader id="headerForTest" objectTitle="{data>name}" objectSubtitle="{data>description}" titleSelectorTooltip="Custom Tooltip" />
    </headerTitle>
    <headerContent>
      <m:VBox>
        <m:ObjectStatus title="Author" text="{data>author}" />
        <m:ObjectStatus title="License" text="{data>license}" />
        <m:HBox>
          <core:Icon src="sap-icon://font-awesome-icons/github" class="sapUiSmallMarginEnd" />
          <m:Link text="GitHub" href="{data>githublink}" target="_blank" />
        </m:HBox>
        <m:HBox>
          <core:Icon src="sap-icon://font-awesome-icons/npm" class="sapUiSmallMarginEnd" />
          <m:Link text="NPM" href="{data>npmlink}" target="_blank" />
        </m:HBox>
        <m:layoutData>
          <m:FlexItemData growFactor="1" />
        </m:layoutData>
      </m:VBox>
      <m:VBox>
        <tnt:InfoLabel id="downloads365" text="Downloads last 365 days {data>downloads365}" renderMode="Loose" colorScheme="5" visible="{= ${data>downloads365} >= 0}" />
        <tnt:InfoLabel id="downloads30" text="Downloads last 30 days {data>downloadsCurrentMonth}" renderMode="Loose" colorScheme="5" visible="{= ${data>downloadsCurrentMonth} >= 0}" />
        <tnt:InfoLabel id="downloads14" text="Downloads last 14 days {data>downloadsCurrentFortnight}" renderMode="Loose" colorScheme="5" visible="{= ${data>downloadsCurrentFortnight} >= 0}" />
        <tnt:InfoLabel id="version" text=" Version {data>version}" renderMode="Loose" colorScheme="3" visible="{= !!${data>version}}" />
        <m:layoutData>
          <m:FlexItemData growFactor="1" />
        </m:layoutData>
      </m:VBox>
      <m:VBox>
        <m:ObjectStatus
          title="Created At"
          text="{
            path: 'data>createdAt',
            type: 'sap.ui.model.type.DateTime',
            formatOptions: {
              source: {pattern: 'yyyy-MM-ddTHH:mm:ss.SSSX'},
              pattern: 'dd.MM.yyyy'
            }
          }"
        />
        <m:ObjectStatus
          title="Last update"
          text="{
            path: 'data>updatedAt',
            type: 'sap.ui.model.type.DateTime',
            formatOptions: {
              source: {pattern: 'yyyy-MM-ddTHH:mm:ss.SSSX'},
              pattern: 'dd.MM.yyyy'
            }
          }"
        />
        <m:layoutData>
          <m:FlexItemData growFactor="1" />
        </m:layoutData>
      </m:VBox>
    </headerContent>
    <sections>
      <ObjectPageSection id="npmSection">
        <subSections>
          <ObjectPageSubSection mode="Expanded" title="npm downloads" titleUppercase="true" id="npmDownloadsSection">
            <blocks>
              <cc:BarChart title="NPM Downloads per Month" color="#288bff" records="{data>downloadsHistory}">
                <cc:ChartRecord label='{data>yearMonth}' value="{data>downloads}" />
              </cc:BarChart>
            </blocks>
          </ObjectPageSubSection>
        </subSections>
      </ObjectPageSection>
      <ObjectPageSection id="readmeSection">
        <subSections>
          <ObjectPageSubSection mode="Expanded" title="readme" id="readme" titleUppercase="true">
            <blocks>
              <md:Markdown id="test2" content="{data>readme}" baseURL="https://raw.githubusercontent.com/{data>gitHubOwner}/{data>gitHubRepo}/main///" class="wrapCodeText" />
            </blocks>
          </ObjectPageSubSection>
        </subSections>
      </ObjectPageSection>
      <ObjectPageSection id="versionsSection">
        <subSections>
          <ObjectPageSubSection mode="Expanded" title="versions" id="versions" titleUppercase="true">
            <blocks>
              <m:List items="{path: 'data>versions/'}" id="listVersions">
                <m:StandardListItem
                  id="listVersionsItem"
                  title="{
                  parts: [
                    {path: 'data>'}
                  ],
                  formatter: 'org.openui5.bestofui5.model.formatter.getKeyValue'
                }"
                />
              </m:List>
            </blocks>
          </ObjectPageSubSection>
        </subSections>
      </ObjectPageSection>
    </sections>
  </ObjectPageLayout>
</mvc:View>
